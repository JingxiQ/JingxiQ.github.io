

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jingxi Qin">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、原函数12345678910111213function (..., list &#x3D; character(), pos &#x3D; -1, envir &#x3D; as.environment(pos),     inherits &#x3D; FALSE) &#123;    if (...length()) &#123;        dots &lt;- match.call(expand.dots &#x3D; FALSE">
<meta property="og:type" content="article">
<meta property="og:title" content="rm()原函数代码解读（上）">
<meta property="og:url" content="http://example.com/2024/08/25/rm/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一、原函数12345678910111213function (..., list &#x3D; character(), pos &#x3D; -1, envir &#x3D; as.environment(pos),     inherits &#x3D; FALSE) &#123;    if (...length()) &#123;        dots &lt;- match.call(expand.dots &#x3D; FALSE">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-08-24T16:00:00.000Z">
<meta property="article:modified_time" content="2024-08-26T15:40:01.198Z">
<meta property="article:author" content="Jingxi Qin">
<meta property="article:tag" content="R">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>rm()原函数代码解读（上） - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="rm()原函数代码解读（上）"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-08-25 00:00" pubdate>
          2024年8月25日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          12 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">rm()原函数代码解读（上）</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="一、原函数"><a href="#一、原函数" class="headerlink" title="一、原函数"></a>一、原函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">,</span> <span class="hljs-built_in">list</span> <span class="hljs-operator">=</span> character<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> pos <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> envir <span class="hljs-operator">=</span> <span class="hljs-built_in">as.environment</span><span class="hljs-punctuation">(</span>pos<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>    inherits <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>...length<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>        dots <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>        <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">all</span><span class="hljs-punctuation">(</span>vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>            stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;... must contain names or character strings&quot;</span><span class="hljs-punctuation">)</span><br>        <span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> .Primitive<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;c&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-punctuation">&#125;</span><br>    .Internal<span class="hljs-punctuation">(</span>remove<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> envir<span class="hljs-punctuation">,</span> inherits<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>function (…, list &#x3D; character(), pos &#x3D; -1, envir &#x3D; as.environment(pos), inherits &#x3D; FALSE)</strong>: 这是一个函数定义，有几个参数：</p>
<ul>
<li><code>...</code> 允许传递任意数量的参数。</li>
<li><code>list</code> 被初始化为一个空的字符向量 (<code>character()</code>).</li>
<li><code>pos</code> 默认为 <code>-1</code>，在 R 中通常表示全局环境。</li>
<li><code>envir</code> 默认为由 <code>pos</code> 指定的环境，通过 <code>as.environment()</code> 转换为环境对象。</li>
<li><code>inherits</code> 是一个逻辑参数，指示是否在父环境中进行查找。</li>
</ul>
<p><strong>if (…length())</strong>: 这行代码检查是否有传递任何 <code>...</code> 参数。<code>...length()</code> 用于获取传递的参数数量。</p>
<blockquote>
<h3 id="参数"><a href="#参数" class="headerlink" title="... 参数"></a><code>...</code> 参数</h3><p><code>...</code> 在 R 函数中用于接收任意数量的参数。这些参数可以是任何类型的对象。</p>
<h3 id="length"><a href="#length" class="headerlink" title="...length()"></a><code>...length()</code></h3><p><code>...length()</code> 是一个 R 内部的特殊功能，它用来获取 <code>...</code> 中参数的个数。虽然在 R 的标准文档中，通常使用 <code>length(list(...))</code> 来获取 <code>...</code> 参数的数量，但 <code>...length()</code> 是一个内部函数，用于更直接地获取这个数量。</p>
<p>在正常的函数定义中，<code>...</code> 的参数被视为一个捕获所有附加参数的列表。为了检查 <code>...</code> 中是否有参数，你可以使用 <code>...length()</code> 这个内部函数来直接获得它的长度。</p>
</blockquote>
<blockquote>
<p> <code>if (...length())</code> 的工作方式：</p>
<ol>
<li><strong>检查 <code>...</code> 的长度</strong>：<ul>
<li><code>...length()</code> 返回 <code>...</code> 参数的个数。</li>
<li>如果返回值大于零，表示 <code>...</code> 中有参数。</li>
</ul>
</li>
<li><strong>条件判断</strong>：<ul>
<li><code>if (...length())</code> 用来检查 <code>...</code> 中是否有传递的参数。如果 <code>...</code> 中有参数，<code>...length()</code> 将返回一个大于零的值，这样 <code>if</code> 条件成立。</li>
<li>如果 <code>...</code> 中没有参数，<code>...length()</code> 将返回零，<code>if</code> 条件不成立，程序将跳过相关的代码块。<code>match.call</code> 函数</li>
</ul>
</li>
</ol>
</blockquote>
<p><code>match.call</code> 是一个函数，它用于获取当前函数调用的表达式。这个函数返回一个包含函数调用的语言对象（<code>call</code> 对象），这个对象描述了函数的名称、参数及其对应的值。它可以帮助你查看函数是如何被调用的，包括所有传递的参数及其值。</p>
<h3 id="expand-dots-参数"><a href="#expand-dots-参数" class="headerlink" title="expand.dots 参数"></a><code>expand.dots</code> 参数</h3><p><code>expand.dots</code> 是 <code>match.call</code> 函数的一个参数。它控制 <code>...</code> （省略号）参数的处理方式：</p>
<ul>
<li>**<code>expand.dots = TRUE</code>**（默认值）：<code>...</code> 参数会被展开，并被包含在 <code>call</code> 对象中。例如，如果你传递了 <code>a, b</code> 作为 <code>...</code> 的参数，它们会被展开并作为独立的参数显示。</li>
<li>**<code>expand.dots = FALSE</code>**：<code>...</code> 参数不会被展开，而是作为 <code>...</code> 保持在 <code>call</code> 对象中。这种设置可以让你查看 <code>...</code> 参数的原始形式，作为一个 <code>...</code> 表达式存在于 <code>call</code> 对象中。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs R">foo <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> y<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-built_in">call</span> <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-built_in">call</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br><br>foo<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> a <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> d <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure>

<p>当调用 <code>foo(1, 2, a = 3, b = 4)</code> 时，<code>match.call(expand.dots = FALSE)</code> 会返回：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">foo<span class="hljs-punctuation">(</span>x <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> y <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> ... <span class="hljs-operator">=</span> pairlist<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> d <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure>

<p>这个返回值表示 <code>...</code> 参数在调用中是如何被表达的，即作为一个整体存在。</p>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a><code>list</code></h3><ul>
<li><p><strong>结构</strong>：<code>list</code> 是 R 中一个非常灵活的数据结构，可以包含不同类型的元素（如数字、字符、向量、数据框等）。它的元素可以是不同类型的对象，而且可以通过名称访问每个元素。</p>
</li>
<li><p><strong>用法</strong>：<code>list</code> 通常用于需要存储不同类型的数据或者复杂数据结构的情况。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">r</span><br>复制代码<br>my_list &lt;- <span class="hljs-built_in">list</span>(<span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-string">&quot;hello&quot;</span>, c = <span class="hljs-number">3</span>:<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="pairlist"><a href="#pairlist" class="headerlink" title="pairlist"></a><code>pairlist</code></h3><ul>
<li><p><strong>结构</strong>：<code>pairlist</code> 是 R 的一个内部数据结构，主要用于存储函数的参数和其他类似的任务。它由一系列的“对”（pair）组成，每对包含一个名字和一个值。这些对连接成一个链表结构。</p>
</li>
<li><p><strong>特点</strong>：<code>pairlist</code> 是一个链表，它的每个元素都是一个包含名称和值的对。<code>pairlist</code> 通常用于处理函数调用中的参数，因为它能有效地处理参数的传递和名字。</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-attribute">r</span>复制代码# pairlist example (conceptual)<br>pairlist_example &lt;- <span class="hljs-built_in">pairlist</span>(a = <span class="hljs-number">1</span>, b = <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> my_list <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> my_list<br><span class="hljs-operator">$</span>a<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-operator">$</span>b<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;hello&quot;</span><br><br><span class="hljs-operator">$</span><span class="hljs-built_in">c</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br><br><span class="hljs-operator">&gt;</span> <span class="hljs-comment"># pairlist example (conceptual)</span><br><span class="hljs-operator">&gt;</span> pairlist_example <span class="hljs-operator">&lt;-</span> pairlist<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> <br><span class="hljs-operator">&gt;</span> pairlist_example<br><span class="hljs-operator">$</span>a<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-operator">$</span>b<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p>这样看着都一样。</p>
<p>Pairlist objects are similar to Lisp’s dotted-pair lists. They are used extensively in the internals of R, but are rarely visible in interpreted code, although they are returned by formals, and can be created by (e.g.) the pairlist function.</p>
<p>Pairlists are handled in the R language in exactly the same way as generic vectors (“lists”). In particular, elements are accessed using the same [[]] syntax. The use of pairlists is deprecated since generic vectors are usually more efficient to use. When an internal pairlist is accessed from R it is generally (including when subsetted) converted to a generic vector.</p>
<p>也就是说pairlist和list在R中的处理方式完全相同，虽然在R的内部被广泛使用，但是这不意味着它在性能上表现更好。stack overflow上说如果不是考虑C语言的话，不需要考虑这个问题。</p>
<blockquote>
<ol>
<li><ul>
<li></li>
</ul>
</li>
</ol>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs R">test <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">)</span><span class="hljs-punctuation">&#123;</span><br>  num <span class="hljs-operator">&lt;-</span> ...length<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>  expandF <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">F</span><span class="hljs-punctuation">)</span><br>  expandF. <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">F</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>  expandF2 <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span>expandF.<span class="hljs-punctuation">)</span><br>  expandT <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><br>  expandT. <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>  print<span class="hljs-punctuation">(</span>num<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;expand.dots = F&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span> <br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;(expand.dots = F)$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF.<span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;as.character,expand.dots = F$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF2<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;expand.dots = T&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandT<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;(expand.dots = T)$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandT.<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br>test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">6</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;expand.dots = F&quot;</span><br>test<span class="hljs-punctuation">(</span>... <span class="hljs-operator">=</span> pairlist<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;(expand.dots = F)$...&quot;</span><br><span class="hljs-punctuation">[[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">2</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">3</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">4</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">5</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">6</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">6</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;as.character,expand.dots = F$...&quot;</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;1&quot;</span> <span class="hljs-string">&quot;2&quot;</span> <span class="hljs-string">&quot;3&quot;</span> <span class="hljs-string">&quot;4&quot;</span> <span class="hljs-string">&quot;5&quot;</span> <span class="hljs-string">&quot;6&quot;</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;expand.dots = T&quot;</span><br>test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;(expand.dots = T)$...&quot;</span><br><span class="hljs-literal">NULL</span><br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/R/" class="print-no-link">#R</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>rm()原函数代码解读（上）</div>
      <div>http://example.com/2024/08/25/rm/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Jingxi Qin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年8月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/08/25/hello-world/" title="Hello World">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Hello World</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/08/25/20240825%E8%AE%BE%E7%BD%AERStudio%E6%8F%90%E7%A4%BA%E8%AF%8D%E4%B8%BA%E8%8B%B1%E6%96%87/" title="设置RStudio语言默认为英文">
                        <span class="hidden-mobile">设置RStudio语言默认为英文</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
