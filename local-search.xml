<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>R作图系统</title>
    <link href="/2024/09/01/20240901R%E4%BD%9C%E5%9B%BE%E5%92%8CR%E7%BC%96%E7%A8%8B/"/>
    <url>/2024/09/01/20240901R%E4%BD%9C%E5%9B%BE%E5%92%8CR%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>健身-胸</title>
    <link href="/2024/09/01/20240901%E7%BB%83%E8%83%B8/"/>
    <url>/2024/09/01/20240901%E7%BB%83%E8%83%B8/</url>
    
    <content type="html"><![CDATA[<p>今天昊川教了我怎么练胸，记录下，以后按照这个流程。</p><p>哑铃推举，10*4，今天是5kg</p><blockquote><p>要点：</p><p>挺胸，不塌腰，在胸前推，一个面上，沉肩</p></blockquote><p>小杠铃推举，10*4，今天是10kg</p><p>固定器械，调整座椅高度到胸前，45kg（不是最大重量）<br>下次第二组就可以上45kg，每组多加一片，每组至少8个</p><p>龙门架练下胸</p><p>俯卧撑</p><p>跪姿俯卧撑</p><p>拉伸</p>]]></content>
    
    
    
    <tags>
      
      <tag>锻炼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sink函数</title>
    <link href="/2024/09/01/20240901/"/>
    <url>/2024/09/01/20240901/</url>
    
    <content type="html"><![CDATA[<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>sink函数只有标准输出，但是没有把代码也附上，所以想要看原函数，看改动哪里可以添加。但是发现sink的功能部分是内置功能，无法修改。但是函数参数的判断和file函数的用法值得记录下。</p><h2 id="sink原函数"><a href="#sink原函数" class="headerlink" title="sink原函数"></a>sink原函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>file <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> append <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">,</span> type <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;output&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;message&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>          split <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>  type <span class="hljs-operator">&lt;-</span> match.arg<span class="hljs-punctuation">(</span>type<span class="hljs-punctuation">)</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>type <span class="hljs-operator">==</span> <span class="hljs-string">&quot;message&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-built_in">is.null</span><span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>      file <span class="hljs-operator">&lt;-</span> stderr<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span>inherits<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;connection&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-operator">!</span>isOpen<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>      stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;&#x27;file&#x27; must be NULL or an already open connection&quot;</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>split<span class="hljs-punctuation">)</span> <br>      stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;cannot split the message connection&quot;</span><span class="hljs-punctuation">)</span><br>    .Internal<span class="hljs-punctuation">(</span>sink<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">,</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">,</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-keyword">else</span> <span class="hljs-punctuation">&#123;</span><br>    closeOnExit <span class="hljs-operator">&lt;-</span> <span class="hljs-literal">FALSE</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-built_in">is.null</span><span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>      file <span class="hljs-operator">&lt;-</span> <span class="hljs-operator">-</span><span class="hljs-number">1L</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>      file <span class="hljs-operator">&lt;-</span> file<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">,</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>append<span class="hljs-punctuation">)</span> <br>        <span class="hljs-string">&quot;a&quot;</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;w&quot;</span><span class="hljs-punctuation">)</span><br>      closeOnExit <span class="hljs-operator">&lt;-</span> <span class="hljs-literal">TRUE</span><br>    <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span>inherits<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;connection&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>      stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;&#x27;file&#x27; must be NULL, a connection or a character string&quot;</span><span class="hljs-punctuation">)</span><br>    .Internal<span class="hljs-punctuation">(</span>sink<span class="hljs-punctuation">(</span>file<span class="hljs-punctuation">,</span> closeOnExit<span class="hljs-punctuation">,</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">,</span> split<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="match-arg"><a href="#match-arg" class="headerlink" title="match.arg"></a>match.arg</h2><p><code>match.arg</code> 的主要功能是：</p><ol><li><strong>参数匹配</strong>：将函数的参数值与一个预定义的字符向量进行匹配，确保该参数值是有效的。</li><li><strong>规范化输入</strong>：将参数值转换为一致的形式，即标准化为预定义选项中的某一个。</li></ol><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>假设你有一个函数，其参数 <code>method</code> 可以取值 “lm”、”glm” 或 “loess”，你可以使用 <code>match.arg</code> 来确保 <code>method</code> 的值是这三者之一，并且返回这个值的标准形式。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs R">my_function <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>method <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;lm&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;glm&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;loess&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-comment"># 使用 match.arg 确保 method 是有效的选项</span><br>  method <span class="hljs-operator">&lt;-</span> match.arg<span class="hljs-punctuation">(</span>method<span class="hljs-punctuation">)</span><br>  <br>  <span class="hljs-comment"># 根据选择的 method 执行不同的操作</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>method <span class="hljs-operator">==</span> <span class="hljs-string">&quot;lm&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Using linear model.\n&quot;</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">&#125;</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>method <span class="hljs-operator">==</span> <span class="hljs-string">&quot;glm&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Using generalized linear model.\n&quot;</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">&#125;</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>method <span class="hljs-operator">==</span> <span class="hljs-string">&quot;loess&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Using local regression (loess).\n&quot;</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment"># 调用函数时使用合法选项</span><br>my_function<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;lm&quot;</span><span class="hljs-punctuation">)</span>    <span class="hljs-comment"># 输出: Using linear model.</span><br>my_function<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;loess&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-comment"># 输出: Using local regression (loess).</span><br><br><span class="hljs-comment"># 调用函数时使用不合法选项（会报错）</span><br>my_function<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;tree&quot;</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment"># 错误: &#x27;arg&#x27; should be one of “lm”, “glm”, “loess”</span><br></code></pre></td></tr></table></figure><p>如果不给参数，<code>match.arg</code>默认第一个参数。</p><h2 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h2><ul><li><code>match.arg</code> 限制了type 只能是message和output其中之一</li><li>如果type 是message<ul><li>判断file<ul><li>如果file是空的<ul><li>file被设置为 <code>stderr()</code>，即标准错误输出。</li></ul></li><li>如果file非空<ul><li>它必须是一个打开的连接（即 <code>inherits(file, &quot;connection&quot;)</code> 和 <code>isOpen(file)</code> 都需要为真），否则报错</li></ul></li></ul></li><li>判断split<ul><li>对于消息连接不支持分割</li></ul></li></ul></li><li>如果type 是output<ul><li>判断file<ul><li>如果file是空的<ul><li>file它被设置为 <code>-1L</code>，表示不重定向（即默认输出）。</li></ul></li><li>如果file非空<ul><li>判断file是否为字符串<ul><li>若是，设置file的读写方式<ul><li>append为真：a，追加</li><li>append为假：w，写入，覆盖</li></ul></li></ul></li><li>判断如果不是connection类<ul><li>报错</li></ul></li></ul></li></ul></li></ul></li></ul><p>里面closeOnExit的功能应该是在.Internal sink里。能看到的部分就是判断，决定读写方式，但是真正的功能怎么实现的看不到。</p><blockquote><p>在R语言中，<code>!inherits(file, &quot;connection&quot;)</code> 是一个用于检查对象类型的表达式。这里是对这个表达式的解释：</p><ol><li><p><strong><code>inherits()</code> 函数</strong>：</p><ul><li><code>inherits()</code> 是一个用于检查一个对象是否继承了某个类（或类的集合）的函数。</li><li>语法是 <code>inherits(x, &quot;class&quot;)</code>，其中 <code>x</code> 是要检查的对象，<code>&quot;class&quot;</code> 是要检查的类名。</li></ul></li><li><p><strong><code>&quot;connection&quot;</code> 类</strong>：</p><ul><li><code>&quot;connection&quot;</code> 是 R 中用于表示数据流（如文件、网络连接等）的一个类。</li><li>如果一个对象是连接对象，它就会被标记为 <code>&quot;connection&quot;</code> 类。</li></ul></li><li><p><strong><code>!</code> 操作符</strong>：</p><ul><li><code>!</code> 是逻辑非操作符，用于取反。</li></ul></li><li><p>**<code>!inherits(file, &quot;connection&quot;)</code>**：</p><ul><li>这个表达式的作用是检查 <code>file</code> 对象是否<strong>不</strong>是 <code>&quot;connection&quot;</code> 类的实例。</li><li>换句话说，它会返回 <code>TRUE</code> 如果 <code>file</code> 不是一个连接对象，否则返回 <code>FALSE</code>。</li></ul></li></ol><p>例如，如果你有一个变量 <code>file</code>，并且你想确认它是否不是一个连接对象，你可以使用这个表达式。如果 <code>file</code> 是一个连接对象（比如一个打开的文件连接），<code>inherits(file, &quot;connection&quot;)</code> 会返回 <code>TRUE</code>，而 <code>!inherits(file, &quot;connection&quot;)</code> 就会返回 <code>FALSE</code>。相反，如果 <code>file</code> 不是连接对象，<code>inherits(file, &quot;connection&quot;)</code> 会返回 <code>FALSE</code>，<code>!inherits(file, &quot;connection&quot;)</code> 会返回 <code>TRUE</code>。</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>R语言环境(2)</title>
    <link href="/2024/09/01/20240901R%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83(2)/"/>
    <url>/2024/09/01/20240901R%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83(2)/</url>
    
    <content type="html"><![CDATA[<h2 id="内置数据"><a href="#内置数据" class="headerlink" title="内置数据"></a>内置数据</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># lazy loading 加载数据</span><br><span class="hljs-comment"># 加载内置数据</span><br>data<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>data 所做的检查与每一个包相关的数据地址并寻找那些地址名与给定名称匹配的文档。用read.table 读取.tab 为拓展名的文档，其中.R 为拓展名的文档作为源文件执行。</p><h2 id="attach-detach"><a href="#attach-detach" class="headerlink" title="attach &amp; detach"></a>attach &amp; detach</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># 在给定的thuesen数据框中寻找目标</span><br>attach<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">)</span><br>search<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> lentils <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>u <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">10</span><span class="hljs-punctuation">,</span> <span class="hljs-number">11</span><span class="hljs-punctuation">,</span> <span class="hljs-number">12</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> lentils<span class="hljs-operator">$</span>v <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> lentils<span class="hljs-operator">$</span>w <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> lentils<br>   u v w<br><span class="hljs-number">1</span> <span class="hljs-number">10</span> <span class="hljs-number">1</span> <span class="hljs-number">4</span><br><span class="hljs-number">2</span> <span class="hljs-number">11</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span><br><span class="hljs-number">3</span> <span class="hljs-number">12</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span><br><span class="hljs-operator">&gt;</span> attach<span class="hljs-punctuation">(</span>lentils<span class="hljs-punctuation">)</span><br><span class="hljs-comment"># lentils 被放在搜索路径中的第二位，.GlobalEnv是工作空间，package:base 是定义了所有标准函数的系统库，package:stats 包含了一些基本的统计程序。新的数据框被默认插入第二个位置。</span><br><span class="hljs-operator">&gt;</span> search<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;.GlobalEnv&quot;</span>        <span class="hljs-string">&quot;lentils&quot;</span>           <span class="hljs-string">&quot;tools:rstudio&quot;</span>     <span class="hljs-string">&quot;package:stats&quot;</span>    <br> <span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;package:graphics&quot;</span>  <span class="hljs-string">&quot;package:grDevices&quot;</span> <span class="hljs-string">&quot;package:utils&quot;</span>     <span class="hljs-string">&quot;package:datasets&quot;</span> <br> <span class="hljs-punctuation">[</span><span class="hljs-number">9</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;package:methods&quot;</span>   <span class="hljs-string">&quot;Autoloads&quot;</span>         <span class="hljs-string">&quot;package:base&quot;</span>     <br><span class="hljs-operator">&gt;</span> u <span class="hljs-operator">&lt;-</span> v<span class="hljs-operator">+</span>w<br><span class="hljs-operator">&gt;</span> u<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span><br><span class="hljs-comment"># attach 包含了数据框的(虚拟)复制操作，所以在attach的数据框的操作不会影响原数据框</span><br><span class="hljs-operator">&gt;</span> lentils<br>   u v w<br><span class="hljs-number">1</span> <span class="hljs-number">10</span> <span class="hljs-number">1</span> <span class="hljs-number">4</span><br><span class="hljs-number">2</span> <span class="hljs-number">11</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span><br><span class="hljs-number">3</span> <span class="hljs-number">12</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span><br><span class="hljs-comment"># detach 默认删除第二位置的数据框，.GlobalEnv和 package:base 不能被 detach 删除，如果这么做，不报错，但也不会删除</span><br><span class="hljs-operator">&gt;</span> detach<span class="hljs-punctuation">(</span>lentils<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> search<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;.GlobalEnv&quot;</span>        <span class="hljs-string">&quot;tools:rstudio&quot;</span>     <span class="hljs-string">&quot;package:stats&quot;</span>     <span class="hljs-string">&quot;package:graphics&quot;</span> <br> <span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;package:grDevices&quot;</span> <span class="hljs-string">&quot;package:utils&quot;</span>     <span class="hljs-string">&quot;package:datasets&quot;</span>  <span class="hljs-string">&quot;package:methods&quot;</span>  <br> <span class="hljs-punctuation">[</span><span class="hljs-number">9</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Autoloads&quot;</span>         <span class="hljs-string">&quot;package:base&quot;</span>     <br><span class="hljs-operator">&gt;</span> u<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span><br><span class="hljs-operator">&gt;</span> lentils<span class="hljs-operator">$</span>u<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span><br></code></pre></td></tr></table></figure><p>通过<code>with</code>函数可以设置一个数据框在<code>.GlobalEnv</code>之前被搜索到：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R">library<span class="hljs-punctuation">(</span>ISwR<span class="hljs-punctuation">)</span><br>data<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">)</span><br>with<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> plot<span class="hljs-punctuation">(</span>blood.glucose<span class="hljs-punctuation">,</span> short.velocity<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>但是这样做的时候，<code>blood.glucose</code>和<code>short.velocity</code>不会被RStudio提示，除非attach，但那就没意义了，总之要知道数据框的列名。</p><h2 id="subset-transform-和-within"><a href="#subset-transform-和-within" class="headerlink" title="subset, transform 和 within"></a>subset, transform 和 within</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> thue2 <span class="hljs-operator">&lt;-</span> subset<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> blood.glucose<span class="hljs-operator">&lt;</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> thue2 <span class="hljs-operator">&lt;-</span> subset<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> blood.glucose<span class="hljs-operator">&lt;</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> thue2<br>   blood.glucose short.velocity<br><span class="hljs-number">6</span>            <span class="hljs-number">5.3</span>           <span class="hljs-number">1.49</span><br><span class="hljs-number">11</span>           <span class="hljs-number">6.7</span>           <span class="hljs-number">1.25</span><br><span class="hljs-number">12</span>           <span class="hljs-number">5.2</span>           <span class="hljs-number">1.19</span><br><span class="hljs-number">15</span>           <span class="hljs-number">6.7</span>           <span class="hljs-number">1.52</span><br><span class="hljs-number">17</span>           <span class="hljs-number">4.2</span>           <span class="hljs-number">1.12</span><br><span class="hljs-number">22</span>           <span class="hljs-number">4.9</span>           <span class="hljs-number">1.03</span><br><span class="hljs-operator">&gt;</span> thue3 <span class="hljs-operator">&lt;-</span> transform<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> log.gluc<span class="hljs-operator">=</span><span class="hljs-built_in">log</span><span class="hljs-punctuation">(</span>blood.glucose<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>thue3<span class="hljs-punctuation">)</span><br>  blood.glucose short.velocity log.gluc<br><span class="hljs-number">1</span>          <span class="hljs-number">15.3</span>           <span class="hljs-number">1.76</span> <span class="hljs-number">2.727853</span><br><span class="hljs-number">2</span>          <span class="hljs-number">10.8</span>           <span class="hljs-number">1.34</span> <span class="hljs-number">2.379546</span><br><span class="hljs-number">3</span>           <span class="hljs-number">8.1</span>           <span class="hljs-number">1.27</span> <span class="hljs-number">2.091864</span><br><span class="hljs-number">4</span>          <span class="hljs-number">19.5</span>           <span class="hljs-number">1.47</span> <span class="hljs-number">2.970414</span><br><span class="hljs-number">5</span>           <span class="hljs-number">7.2</span>           <span class="hljs-number">1.27</span> <span class="hljs-number">1.974081</span><br><span class="hljs-number">6</span>           <span class="hljs-number">5.3</span>           <span class="hljs-number">1.49</span> <span class="hljs-number">1.667707</span><br></code></pre></td></tr></table></figure><p>subset 也作用于单个向量，但要排除掉那些在选择标准中有缺失值的观测。</p><p>链式计算是指将多个操作链接在一起逐步处理数据，比如 <code>df %&gt;% transform() %&gt;% other_function()</code>。<code>transform()</code> 函数本身不支持链式计算，因为它需要在单独的调用中处理数据。这限制了代码的可读性和简洁性，因为每一步都需要单独调用，不像链式计算那样直观。可以考虑使用 <code>dplyr</code> 包中的 <code>mutate()</code>，它支持链式计算，使代码更清晰易读。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> thue4 <span class="hljs-operator">&lt;-</span> within<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-operator">+</span>   log.gluc <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">log</span><span class="hljs-punctuation">(</span>blood.glucose<span class="hljs-punctuation">)</span><br><span class="hljs-operator">+</span>   m <span class="hljs-operator">&lt;-</span> mean<span class="hljs-punctuation">(</span>log.gluc<span class="hljs-punctuation">)</span><br><span class="hljs-operator">+</span>   centered.log.gluc <span class="hljs-operator">&lt;-</span> log.gluc <span class="hljs-operator">-</span> m<br><span class="hljs-operator">+</span>   rm<span class="hljs-punctuation">(</span>m<span class="hljs-punctuation">)</span><br><span class="hljs-operator">+</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>thue4<span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><br>  blood.glucose short.velocity centered.log.gluc log.gluc<br><span class="hljs-number">1</span>          <span class="hljs-number">15.3</span>           <span class="hljs-number">1.76</span>         <span class="hljs-number">0.4818798</span> <span class="hljs-number">2.727853</span><br></code></pre></td></tr></table></figure><p><code>within</code>的第二个参数是一个任意表达式（此处是compound）表达式。它返回了所有新的和修改过的变量到更新过的数据框中，然后返回。中间变量可以用rm清除，尤其是内容与数据框不兼容的时候。</p><h2 id="with-within"><a href="#with-within" class="headerlink" title="with, within"></a>with, within</h2><blockquote><p>来自chatgpt</p></blockquote><p>在 R 语言中，<code>with</code> 和 <code>within</code> 函数用于数据框（data frame）内的操作，但它们的用途和行为有所不同。以下是它们的区别及各自用法的详细说明：</p><h3 id="with-函数"><a href="#with-函数" class="headerlink" title="with 函数"></a><code>with</code> 函数</h3><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p><code>with</code> 函数用于在指定的数据框或列表环境中执行表达式，以便在这个环境中引用变量时无需重复指定数据框名称。</p><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">with<span class="hljs-punctuation">(</span>data<span class="hljs-punctuation">,</span> <span class="hljs-built_in">expression</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><ul><li><code>data</code>：数据框或列表。</li><li><code>expression</code>：在 <code>data</code> 环境中评估的表达式。</li></ul><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>假设有一个数据框 <code>df</code>，如下所示：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">df <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">6</span><span class="hljs-operator">:</span><span class="hljs-number">10</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>你可以使用 <code>with</code> 函数计算 <code>a</code> 和 <code>b</code> 列的和：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">with<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">,</span> a <span class="hljs-operator">+</span> b<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这会输出：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">7</span>  <span class="hljs-number">9</span> <span class="hljs-number">11</span> <span class="hljs-number">13</span> <span class="hljs-number">15</span><br></code></pre></td></tr></table></figure><p>在这个例子中，你可以直接引用 <code>a</code> 和 <code>b</code> 而不需要每次都写 <code>df$a</code> 和 <code>df$b</code>。</p><h3 id="within-函数"><a href="#within-函数" class="headerlink" title="within 函数"></a><code>within</code> 函数</h3><h4 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h4><p><code>within</code> 函数用于在数据框中修改或添加变量。它允许你在数据框的环境中进行操作，并返回一个修改后的数据框。</p><h4 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">within<span class="hljs-punctuation">(</span>data<span class="hljs-punctuation">,</span> <span class="hljs-built_in">expression</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><ul><li><code>data</code>：数据框。</li><li><code>expression</code>：在 <code>data</code> 环境中执行的表达式，用于修改数据框。</li></ul><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p>假设有一个数据框 <code>df</code>，如下所示：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">df <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">6</span><span class="hljs-operator">:</span><span class="hljs-number">10</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>你可以使用 <code>within</code> 函数添加一列 <code>c</code>，它是 <code>a</code> 和 <code>b</code> 的和：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs r">df_new <span class="hljs-operator">&lt;-</span> within<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-built_in">c</span> <span class="hljs-operator">&lt;-</span> a <span class="hljs-operator">+</span> b<br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这会生成一个新的数据框 <code>df_new</code>：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs r">  a  b  <span class="hljs-built_in">c</span><br><span class="hljs-number">1</span> <span class="hljs-number">1</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span><br><span class="hljs-number">2</span> <span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">9</span><br><span class="hljs-number">3</span> <span class="hljs-number">3</span>  <span class="hljs-number">8</span> <span class="hljs-number">11</span><br><span class="hljs-number">4</span> <span class="hljs-number">4</span>  <span class="hljs-number">9</span> <span class="hljs-number">13</span><br><span class="hljs-number">5</span> <span class="hljs-number">5</span> <span class="hljs-number">10</span> <span class="hljs-number">15</span><br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li><code>with</code> 用于在数据框的环境中执行一个表达式，而不修改数据框本身。它适用于那些不需要改变数据框内容的计算任务。</li><li><code>within</code> 用于修改数据框或添加新变量，并返回一个新的数据框。它适用于需要在数据框中进行变更的场景。</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901%E9%98%B2%E7%9B%B2%E6%B2%BB%E7%9B%B2/"/>
    <url>/2024/09/01/20240901%E9%98%B2%E7%9B%B2%E6%B2%BB%E7%9B%B2/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901%E7%9C%BC%E7%9C%B6%E7%97%85/"/>
    <url>/2024/09/01/20240901%E7%9C%BC%E7%9C%B6%E7%97%85/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901%E7%9C%BC%E4%B8%8E%E5%85%A8%E8%BA%AB%E7%97%85/"/>
    <url>/2024/09/01/20240901%E7%9C%BC%E4%B8%8E%E5%85%A8%E8%BA%AB%E7%97%85/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901%E6%8A%91%E9%83%81&amp;%E5%8F%8C%E7%9B%B8&amp;%E7%84%A6%E8%99%91%E4%B8%8E%E6%81%90%E6%83%A7&amp;%E5%BC%BA%E8%BF%AB%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%9A%9C%E7%A2%8D/"/>
    <url>/2024/09/01/20240901%E6%8A%91%E9%83%81&amp;%E5%8F%8C%E7%9B%B8&amp;%E7%84%A6%E8%99%91%E4%B8%8E%E6%81%90%E6%83%A7&amp;%E5%BC%BA%E8%BF%AB%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%9A%9C%E7%A2%8D/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901%E7%9C%BC%E5%89%8D%E6%AE%B5%E5%A4%96%E4%BC%A4/"/>
    <url>/2024/09/01/20240901%E7%9C%BC%E5%89%8D%E6%AE%B5%E5%A4%96%E4%BC%A4/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901Python%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E5%9F%BA%E7%A1%80&amp;%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/"/>
    <url>/2024/09/01/20240901Python%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E5%9F%BA%E7%A1%80&amp;%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/09/01/20240901R%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/"/>
    <url>/2024/09/01/20240901R%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>复习《中国大陆医学生誓言》</title>
    <link href="/2024/08/31/20240831%E5%8C%BB%E5%AD%A6%E7%94%9F%E8%AA%93%E8%A8%80/"/>
    <url>/2024/08/31/20240831%E5%8C%BB%E5%AD%A6%E7%94%9F%E8%AA%93%E8%A8%80/</url>
    
    <content type="html"><![CDATA[<h1 id="中国大陆医学生誓言"><a href="#中国大陆医学生誓言" class="headerlink" title="中国大陆医学生誓言"></a>中国大陆医学生誓言</h1><p><strong>健康所系，性命相托。</strong></p><p>当我步入神圣医学学府的时刻，谨庄严宣誓：</p><p>我志愿献身医学，热爱祖国，忠于人民，恪守医德，尊师守纪，刻苦钻研，孜孜不倦，精益求精，全面发展。</p><p>我决心竭尽全力除人类之病痛，助健康之完美，维护医术的圣洁和荣誉，救死扶伤，不辞艰辛，执着追求，为祖国医药卫生事业的发展和人类身心健康奋斗终生。</p><p>——国家教委高教司[1991]106号 附件四</p>]]></content>
    
    
    
    <tags>
      
      <tag>医学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>R语言环境(1)</title>
    <link href="/2024/08/31/20240831R%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83(1)/"/>
    <url>/2024/08/31/20240831R%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83(1)/</url>
    
    <content type="html"><![CDATA[<h2 id="会话管理"><a href="#会话管理" class="headerlink" title="会话管理"></a>会话管理</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs R">ls<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>rm<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">,</span> weight<span class="hljs-punctuation">)</span><br>rm<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-operator">=</span>ls<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># rm function(..., list = character(), pos = -s, envir = as.environment(pos), inherits = FALSE)</span><br>save.image<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>不会删除以点号开头的向量，因为<code>ls()</code>不能列出它们，需要用<code>ls(all = T)</code>，但这种名称都为系统本身所使用。</p><h3 id="文本输出"><a href="#文本输出" class="headerlink" title="文本输出"></a>文本输出</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs R">getwd<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>setwd<span class="hljs-punctuation">(</span>mydir<span class="hljs-punctuation">)</span><br>sink<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;myfile&quot;</span><span class="hljs-punctuation">)</span><br>ls<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>sink<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>在R中，<code>sink</code>函数通常用于重定向输出，主要有以下几种情况适合用于批量处理：</p><ol><li><p><strong>日志记录</strong>： 如果你在运行一段代码时希望将控制台输出保存到文件中，以便后续查看或分析，可以使用<code>sink</code>函数。例如，在执行复杂的分析或长时间运行的任务时，你可以将所有的输出信息保存到一个文件中，以便调试和记录。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> sink<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;output_log.txt&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># 这里放置你的代码</span><br><span class="hljs-operator">&gt;</span> summary<span class="hljs-punctuation">(</span>titanic_long<span class="hljs-punctuation">)</span><br> Survived      Freq           alluvium     Demographic    stratum  <br> No <span class="hljs-operator">:</span><span class="hljs-number">48</span>   Min.   <span class="hljs-operator">:</span>  <span class="hljs-number">0.00</span>   Min.   <span class="hljs-operator">:</span> <span class="hljs-number">1.00</span>   Class<span class="hljs-operator">:</span><span class="hljs-number">32</span>    Male   <span class="hljs-operator">:</span><span class="hljs-number">16</span>  <br> Yes<span class="hljs-operator">:</span><span class="hljs-number">48</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span>  <span class="hljs-number">0.75</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span> <span class="hljs-number">8.75</span>   Sex  <span class="hljs-operator">:</span><span class="hljs-number">32</span>    Female <span class="hljs-operator">:</span><span class="hljs-number">16</span>  <br>          Median <span class="hljs-operator">:</span> <span class="hljs-number">13.50</span>   Median <span class="hljs-operator">:</span><span class="hljs-number">16.50</span>   Age  <span class="hljs-operator">:</span><span class="hljs-number">32</span>    Child  <span class="hljs-operator">:</span><span class="hljs-number">16</span>  <br>          Mean   <span class="hljs-operator">:</span> <span class="hljs-number">68.78</span>   Mean   <span class="hljs-operator">:</span><span class="hljs-number">16.50</span>               Adult  <span class="hljs-operator">:</span><span class="hljs-number">16</span>  <br>          <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span> <span class="hljs-number">77.00</span>   <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">24.25</span>               <span class="hljs-number">1</span>st    <span class="hljs-operator">:</span> <span class="hljs-number">8</span>  <br>          Max.   <span class="hljs-operator">:</span><span class="hljs-number">670.00</span>   Max.   <span class="hljs-operator">:</span><span class="hljs-number">32.00</span>               <span class="hljs-number">2</span>nd    <span class="hljs-operator">:</span> <span class="hljs-number">8</span>  <br>                                                       <span class="hljs-punctuation">(</span>Other<span class="hljs-punctuation">)</span><span class="hljs-operator">:</span><span class="hljs-number">16</span>  <br><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>titanic_long<span class="hljs-punctuation">)</span><br>  Survived Freq alluvium Demographic stratum<br><span class="hljs-number">1</span>       No    <span class="hljs-number">0</span>        <span class="hljs-number">1</span>       Class     <span class="hljs-number">1</span>st<br><span class="hljs-number">2</span>       No    <span class="hljs-number">0</span>        <span class="hljs-number">2</span>       Class     <span class="hljs-number">2</span>nd<br><span class="hljs-number">3</span>       No   <span class="hljs-number">35</span>        <span class="hljs-number">3</span>       Class     <span class="hljs-number">3</span>rd<br><span class="hljs-number">4</span>       No    <span class="hljs-number">0</span>        <span class="hljs-number">4</span>       Class    Crew<br><span class="hljs-number">5</span>       No    <span class="hljs-number">0</span>        <span class="hljs-number">5</span>       Class     <span class="hljs-number">1</span>st<br><span class="hljs-number">6</span>       No    <span class="hljs-number">0</span>        <span class="hljs-number">6</span>       Class     <span class="hljs-number">2</span>nd<br><span class="hljs-operator">&gt;</span> print<span class="hljs-punctuation">(</span>my_data<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> sink<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment"># 关闭重定向</span><br></code></pre></td></tr></table></figure></li><li><p><strong>保存多个输出</strong>： 如果你需要同时保存多个分析结果，可以使用<code>sink</code>函数将这些结果输出到不同的文件中。这在进行批量处理时特别有用，比如在执行循环时，每次迭代都将结果写入不同的文件。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span>i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>  sink<span class="hljs-punctuation">(</span>paste0<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;output_&quot;</span><span class="hljs-punctuation">,</span> i<span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;.txt&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-comment"># 这里放置你的代码</span><br>  print<span class="hljs-punctuation">(</span>paste<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Result for iteration&quot;</span><span class="hljs-punctuation">,</span> i<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  sink<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment"># 关闭重定向</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>捕获警告和错误信息</strong>： 在进行批量处理时，可能需要捕获和记录警告或错误信息，以便后续处理。<code>sink</code>可以用来重定向这些信息到日志文件中。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs R">sink<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;warnings_and_errors.txt&quot;</span><span class="hljs-punctuation">,</span> type <span class="hljs-operator">=</span> <span class="hljs-string">&quot;message&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># 这里放置你的代码</span><br>some_function_that_might_warn_or_error<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>sink<span class="hljs-punctuation">(</span>type <span class="hljs-operator">=</span> <span class="hljs-string">&quot;message&quot;</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment"># 关闭重定向</span><br></code></pre></td></tr></table></figure></li><li><p><strong>批量生成报告</strong>： 当你需要生成批量报告时，可以结合<code>sink</code>函数来保存每个报告的内容到不同的文件。例如，当你对多个数据集进行分析时，可以为每个数据集生成一个报告，并将其保存到单独的文件中。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs R">datasets <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>dataset1<span class="hljs-punctuation">,</span> dataset2<span class="hljs-punctuation">,</span> dataset3<span class="hljs-punctuation">)</span><br><span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span>i <span class="hljs-keyword">in</span> <span class="hljs-built_in">seq_along</span><span class="hljs-punctuation">(</span>datasets<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>  sink<span class="hljs-punctuation">(</span>paste0<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;report_&quot;</span><span class="hljs-punctuation">,</span> i<span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;.txt&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-comment"># 这里放置你的分析代码</span><br>  print<span class="hljs-punctuation">(</span>summary<span class="hljs-punctuation">(</span>datasets<span class="hljs-punctuation">[[</span>i<span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>  sink<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment"># 关闭重定向</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>在R中，<code>source</code>函数用于从文件中读取和执行R代码。当使用<code>source</code>函数时，可以通过设置参数<code>echo = TRUE</code>来控制是否将执行的代码及其结果打印到控制台。这对于调试和理解代码的执行过程非常有用。</p><h3 id="source函数及其参数"><a href="#source函数及其参数" class="headerlink" title="source函数及其参数"></a><code>source</code>函数及其参数</h3><ul><li><strong><code>file</code></strong>: 指定要执行的R脚本文件的路径。</li><li><strong><code>local</code></strong>: 如果为<code>TRUE</code>，则脚本将在当前环境中执行。如果为<code>FALSE</code>，则在新环境中执行。</li><li><strong><code>echo</code></strong>: 如果为<code>TRUE</code>，则在执行脚本时会打印代码到控制台（默认为<code>FALSE</code>）。这对于调试或理解代码的执行流程很有帮助。</li><li><strong><code>print.eval</code></strong>: 如果为<code>TRUE</code>，则打印评估结果（默认为<code>TRUE</code>）。</li><li><strong><code>prompt</code></strong>: 自定义打印代码的前缀。</li></ul><ol><li><p><strong>基本用法</strong>：<br>假设你有一个脚本文件 <code>script.R</code>，内容如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-comment"># script.R</span><br>x <span class="hljs-operator">&lt;-</span> 10<br>y <span class="hljs-operator">&lt;-</span> 20<br>z <span class="hljs-operator">&lt;-</span> x <span class="hljs-operator">+</span> y<br>print<span class="hljs-punctuation">(</span>z<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>你可以通过以下方式执行这个脚本并打印代码和结果：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">source<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;script.R&quot;</span><span class="hljs-punctuation">,</span> echo <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>执行时，控制台将显示：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-attribute">x</span> &lt;- <span class="hljs-number">10</span><br><span class="hljs-attribute">y</span> &lt;- <span class="hljs-number">20</span><br>z &lt;- <span class="hljs-attribute">x</span> + <span class="hljs-attribute">y</span><br><span class="hljs-built_in">print</span>(z)<br><span class="hljs-selector-attr">[1]</span> <span class="hljs-number">30</span><br></code></pre></td></tr></table></figure></li><li><p><strong>在调试时使用</strong>：<br>如果你正在调试脚本，并希望查看每一步代码的执行情况，<code>echo = TRUE</code>可以帮助你了解脚本的运行情况。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">source<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;script.R&quot;</span><span class="hljs-punctuation">,</span> echo <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> print.eval <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这会将每行代码打印到控制台，并显示评估结果。</p></li><li><p><strong>与自定义提示结合使用</strong>：<br>你还可以自定义每行代码打印时的提示前缀。例如：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">source<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;script.R&quot;</span><span class="hljs-punctuation">,</span> echo <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&gt;&gt; &quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这会将每行代码以<code>&gt;&gt;</code>作为前缀打印到控制台。</p></li></ol><h3 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># A introduction to R</span><br>help.start<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>help<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">?</span>help<br><span class="hljs-comment"># 模糊匹配，搜索更深</span><br>help.search<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h3 id="包"><a href="#包" class="headerlink" title="包"></a>包</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R">library<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># 移除已library的包</span><br>detach<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;package:survival&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>碎金-R基础(3)</title>
    <link href="/2024/08/30/20240830%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(3)/"/>
    <url>/2024/08/30/20240830%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(3)/</url>
    
    <content type="html"><![CDATA[<h2 id="列表、数据框、索引"><a href="#列表、数据框、索引" class="headerlink" title="列表、数据框、索引"></a>列表、数据框、索引</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs R">mylist <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>before <span class="hljs-operator">=</span> intake.pre<span class="hljs-punctuation">,</span> after <span class="hljs-operator">=</span> intake.post<span class="hljs-punctuation">)</span><br>d <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>intake.pre<span class="hljs-punctuation">,</span> intake.post<span class="hljs-punctuation">)</span><br>d<span class="hljs-operator">$</span>intake.pre<br>intake.pre<span class="hljs-punctuation">[</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><br><span class="hljs-comment"># 为了得到一列元素，前5个</span><br>intake.pre<span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><br>intake.pre<span class="hljs-punctuation">[</span><span class="hljs-operator">-</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p><code>intake.pre[3,5,7]</code> 是指定一个三维阵列。</p><h2 id="条件选择、dataframe索引、分组数据和数据框"><a href="#条件选择、dataframe索引、分组数据和数据框" class="headerlink" title="条件选择、dataframe索引、分组数据和数据框"></a>条件选择、dataframe索引、分组数据和数据框</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs R">intake.post<span class="hljs-punctuation">[</span>intake.pre <span class="hljs-operator">&gt;</span> <span class="hljs-number">7000</span><span class="hljs-punctuation">]</span><br>intake.post<span class="hljs-punctuation">[</span>intake.pre <span class="hljs-operator">&gt;</span> <span class="hljs-number">7000</span> <span class="hljs-operator">&amp;</span> intake.pre <span class="hljs-operator">&lt;=</span> <span class="hljs-number">8000</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">is.na</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><br>d<span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><br>d<span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><br>d<span class="hljs-punctuation">[</span>d<span class="hljs-operator">$</span>intake.pre<span class="hljs-operator">&gt;</span><span class="hljs-number">7000</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><br><span class="hljs-comment"># head,tail分别看前6行、后6行，但是有些数据一行就显示很多了，所以用索引有时候更好看</span><br>d<span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><br>head<span class="hljs-punctuation">(</span>d<span class="hljs-punctuation">)</span><br>taid<span class="hljs-punctuation">(</span>d<span class="hljs-punctuation">)</span><br><span class="hljs-comment"># split根据分组生成一系列向量</span><br>exp.lean <span class="hljs-operator">&lt;-</span> energy<span class="hljs-operator">$</span>expend<span class="hljs-punctuation">[</span>energy<span class="hljs-operator">$</span>stature<span class="hljs-operator">==</span><span class="hljs-string">&quot;lean&quot;</span><span class="hljs-punctuation">]</span><br>exp.obese <span class="hljs-operator">&lt;-</span> energy<span class="hljs-operator">$</span>expend<span class="hljs-punctuation">[</span>energy<span class="hljs-operator">$</span>stature<span class="hljs-operator">==</span><span class="hljs-string">&quot;obese&quot;</span><span class="hljs-punctuation">]</span><br>l <span class="hljs-operator">&lt;-</span> split<span class="hljs-punctuation">(</span>energy<span class="hljs-operator">$</span>expend<span class="hljs-punctuation">,</span> energy<span class="hljs-operator">$</span>stature<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h2 id="隐式循环"><a href="#隐式循环" class="headerlink" title="隐式循环"></a>隐式循环</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs R">lapply<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">)</span><br><br>sapply<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">,</span> simplify <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br><br>vapply<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> FUN.VALUE<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br><br>replicate<span class="hljs-punctuation">(</span>n<span class="hljs-punctuation">,</span> expr<span class="hljs-punctuation">,</span> simplify <span class="hljs-operator">=</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">)</span><br><br>simplify2array<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> higher <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> except <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">0L</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1L</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h3 id="lapply"><a href="#lapply" class="headerlink" title="lapply"></a>lapply</h3><p>总是返回一个列表list</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">lapply<span class="hljs-punctuation">(</span>thuesen<span class="hljs-punctuation">,</span> mean<span class="hljs-punctuation">,</span> na.rm<span class="hljs-operator">=</span><span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h3 id="sapply"><a href="#sapply" class="headerlink" title="sapply"></a>sapply</h3><p>尽可能把结果简化为矢量或矩阵，s</p><h3 id="replicate"><a href="#replicate" class="headerlink" title="replicate"></a>replicate</h3><p><code>replicate</code> is a wrapper for the common use of <code>sapply</code> for repeated evaluation of an expression (which will usually involve random number generation).</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">replicate<span class="hljs-punctuation">(</span><span class="hljs-number">100</span><span class="hljs-punctuation">,</span> mean<span class="hljs-punctuation">(</span>rexp<span class="hljs-punctuation">(</span><span class="hljs-number">10</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">hist<span class="hljs-punctuation">(</span>replicate<span class="hljs-punctuation">(</span><span class="hljs-number">100</span><span class="hljs-punctuation">,</span> mean<span class="hljs-punctuation">(</span>rexp<span class="hljs-punctuation">(</span><span class="hljs-number">10</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><img src="/../image/hist.png" alt="hist"></p><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> args<span class="hljs-punctuation">(</span>apply<span class="hljs-punctuation">)</span><br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> MARGIN<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">,</span> simplify <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-literal">NULL</span><br><span class="hljs-operator">&gt;</span> a <span class="hljs-operator">&lt;-</span> matrix<span class="hljs-punctuation">(</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-number">12</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> a<br>            <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">0.05989430</span> <span class="hljs-operator">-</span><span class="hljs-number">1.9742683</span>  <span class="hljs-number">0.3055981</span> <span class="hljs-number">0.09329195</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">0.02776955</span> <span class="hljs-operator">-</span><span class="hljs-number">0.5145057</span> <span class="hljs-operator">-</span><span class="hljs-number">1.0739063</span> <span class="hljs-number">0.38565814</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">0.87636509</span>  <span class="hljs-number">0.9361427</span> <span class="hljs-operator">-</span><span class="hljs-number">0.8130423</span> <span class="hljs-number">1.05371669</span><br><span class="hljs-operator">&gt;</span> apply<span class="hljs-punctuation">(</span>a<span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">min</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">0.02776955</span> <span class="hljs-operator">-</span><span class="hljs-number">1.97426825</span> <span class="hljs-operator">-</span><span class="hljs-number">1.07390630</span>  <span class="hljs-number">0.09329195</span><br></code></pre></td></tr></table></figure><h3 id="tapply"><a href="#tapply" class="headerlink" title="tapply"></a>tapply</h3><p>原函数复杂。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">tapply</span><span class="hljs-params">(energy<span class="hljs-variable">$expend</span>, energy<span class="hljs-variable">$stature</span>, median)</span></span><br></code></pre></td></tr></table></figure><p>留个坑，明天填</p><h2 id="matrix"><a href="#matrix" class="headerlink" title="matrix"></a>matrix</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> rnorm<span class="hljs-punctuation">(</span><span class="hljs-number">12</span><span class="hljs-punctuation">)</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">0.10700263</span>  <span class="hljs-number">1.00670621</span>  <span class="hljs-number">0.95424255</span>  <span class="hljs-number">1.25678424</span> <span class="hljs-operator">-</span><span class="hljs-number">1.03494506</span> <span class="hljs-operator">-</span><span class="hljs-number">0.03080209</span> <span class="hljs-operator">-</span><span class="hljs-number">0.37540645</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">8</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">0.19333902</span> <span class="hljs-operator">-</span><span class="hljs-number">0.46068014</span> <span class="hljs-operator">-</span><span class="hljs-number">0.73324494</span> <span class="hljs-operator">-</span><span class="hljs-number">0.47054238</span>  <span class="hljs-number">0.27832456</span><br><span class="hljs-operator">&gt;</span> matrix<span class="hljs-punctuation">(</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-number">12</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">)</span><br>            <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">0.19537621</span> <span class="hljs-operator">-</span><span class="hljs-number">0.4741858</span> <span class="hljs-operator">-</span><span class="hljs-number">1.5256267</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">2.62273301</span>  <span class="hljs-number">0.1724706</span> <span class="hljs-operator">-</span><span class="hljs-number">1.5558049</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">0.09622635</span> <span class="hljs-operator">-</span><span class="hljs-number">0.4325424</span>  <span class="hljs-number">0.7909691</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">0.68626223</span>  <span class="hljs-number">1.4428984</span>  <span class="hljs-number">0.3787396</span><br><span class="hljs-operator">&gt;</span> matrix<span class="hljs-punctuation">(</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-number">12</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br>          <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span>      <span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">1.192492</span> <span class="hljs-operator">-</span><span class="hljs-number">0.7622937</span> <span class="hljs-operator">-</span><span class="hljs-number">2.6369124</span> <span class="hljs-number">0.2271874</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">1.748089</span> <span class="hljs-operator">-</span><span class="hljs-number">0.2029010</span> <span class="hljs-operator">-</span><span class="hljs-number">0.4671013</span> <span class="hljs-number">0.5578554</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span><span class="hljs-number">1.015322</span>  <span class="hljs-number">1.6526016</span> <span class="hljs-operator">-</span><span class="hljs-number">0.3449991</span> <span class="hljs-number">1.5391723</span><br><span class="hljs-operator">&gt;</span> args<span class="hljs-punctuation">(</span>matrix<span class="hljs-punctuation">)</span><br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>data <span class="hljs-operator">=</span> <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> nrow <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> ncol <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> byrow <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">dimnames</span> <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">)</span> <br><span class="hljs-literal">NULL</span><br></code></pre></td></tr></table></figure><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs R">sort<span class="hljs-punctuation">(</span>intake<span class="hljs-operator">$</span>post<span class="hljs-punctuation">)</span><br><span class="hljs-comment"># 和sort效果一样</span><br>o <span class="hljs-operator">&lt;-</span> order<span class="hljs-punctuation">(</span>intake<span class="hljs-operator">$</span>post<span class="hljs-punctuation">)</span><br>intake<span class="hljs-operator">$</span>post<span class="hljs-punctuation">[</span>o<span class="hljs-punctuation">]</span><br>intake<span class="hljs-operator">$</span>pre<span class="hljs-punctuation">[</span>o<span class="hljs-punctuation">]</span><br><span class="hljs-comment"># 对整个数据框排序</span><br>intake.sorted <span class="hljs-operator">&lt;-</span> intake<span class="hljs-punctuation">[</span>o<span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><h3 id="1-2-如果x是一个水平为n的因子，y是一个长度为n的向量，计算y-x-的结果是什么"><a href="#1-2-如果x是一个水平为n的因子，y是一个长度为n的向量，计算y-x-的结果是什么" class="headerlink" title="1.2 如果x是一个水平为n的因子，y是一个长度为n的向量，计算y[x]的结果是什么"></a>1.2 如果x是一个水平为n的因子，y是一个长度为n的向量，计算y[x]的结果是什么</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> y <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x.1 <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> A B A C B C<br>Levels<span class="hljs-operator">:</span> A B C<br><span class="hljs-operator">&gt;</span> x.1 <br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span><br>Levels<span class="hljs-operator">:</span> one two three<br><span class="hljs-operator">&gt;</span> z <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x.1<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>z<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> y <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x.1 <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> A B A C B C<br>Levels<span class="hljs-operator">:</span> A B C<br><span class="hljs-operator">&gt;</span> x.1 <br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span><br>Levels<span class="hljs-operator">:</span> one two three<br><span class="hljs-operator">&gt;</span> z <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x.1<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>z<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> y <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;D&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;E&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;D&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;E&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x.1 <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> x<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> A B A C B C D E<br>Levels<span class="hljs-operator">:</span> A B C D E<br><span class="hljs-operator">&gt;</span> x.1 <br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-literal">NA</span><span class="hljs-operator">&gt;</span><br>Levels<span class="hljs-operator">:</span> one two three<br><span class="hljs-operator">&gt;</span> z <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;A&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;B&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;C&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">1</span>  <span class="hljs-number">3</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span> <span class="hljs-literal">NA</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>x.1<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br><span class="hljs-operator">&gt;</span> y<span class="hljs-punctuation">[</span>z<span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span> <span class="hljs-literal">NA</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>R可视化-元素</title>
    <link href="/2024/08/30/20240830%E5%85%83%E7%B4%A0-%E3%80%8A%E7%8E%B0%E4%BB%A3%E7%BB%9F%E8%AE%A1%E5%9B%BE%E5%BD%A2%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/08/30/20240830%E5%85%83%E7%B4%A0-%E3%80%8A%E7%8E%B0%E4%BB%A3%E7%BB%9F%E8%AE%A1%E5%9B%BE%E5%BD%A2%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="3-1-颜色"><a href="#3-1-颜色" class="headerlink" title="3.1 颜色"></a>3.1 颜色</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> pdf<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;colors-bar.pdf&quot;</span><span class="hljs-punctuation">,</span> height <span class="hljs-operator">=</span> <span class="hljs-number">120</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> par<span class="hljs-punctuation">(</span>mar <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> yaxs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;i&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> barplot<span class="hljs-punctuation">(</span><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>colors<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><br><span class="hljs-operator">+</span>         col <span class="hljs-operator">=</span> rev<span class="hljs-punctuation">(</span>colors<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> names.arg <span class="hljs-operator">=</span> rev<span class="hljs-punctuation">(</span>colors<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> horiz <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span><br><span class="hljs-operator">+</span>         las <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> xaxt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;n&quot;</span><span class="hljs-punctuation">,</span> main <span class="hljs-operator">=</span> <span class="hljs-built_in">expression</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Bars of colors in&quot;</span> <span class="hljs-operator">~</span> italic<span class="hljs-punctuation">(</span>colors<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">+</span> <span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> dev.off<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这里会在工作目录下生成pdf，运行第一行就生成pdf文件，如果这时候打开，会报错访问pdf时遇到共享冲突。而且画图后，文件大小也为空。必须<code>dev.off()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> weight <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">60</span><span class="hljs-punctuation">,</span><span class="hljs-number">72</span><span class="hljs-punctuation">,</span><span class="hljs-number">57</span><span class="hljs-punctuation">,</span><span class="hljs-number">90</span><span class="hljs-punctuation">,</span><span class="hljs-number">95</span><span class="hljs-punctuation">,</span><span class="hljs-number">72</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> height <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1.75</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.80</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.65</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.90</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.74</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.91</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> plot<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">,</span> weight<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> height<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">*</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span>  <span class="hljs-number">8.8910368</span>  <span class="hljs-number">4.1141213</span> <span class="hljs-operator">-</span><span class="hljs-number">0.6139926</span> <span class="hljs-operator">-</span><span class="hljs-number">3.7001999</span>  <span class="hljs-number">1.0091345</span>  <span class="hljs-number">2.0395394</span><br><span class="hljs-operator">&gt;</span> hh <span class="hljs-operator">&lt;-</span> sort<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> hh<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1.65</span> <span class="hljs-number">1.74</span> <span class="hljs-number">1.75</span> <span class="hljs-number">1.80</span> <span class="hljs-number">1.90</span> <span class="hljs-number">1.91</span><br><span class="hljs-operator">&gt;</span> palette<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-comment"># 默认的调色板颜色</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;black&quot;</span>   <span class="hljs-string">&quot;#DF536B&quot;</span> <span class="hljs-string">&quot;#61D04F&quot;</span> <span class="hljs-string">&quot;#2297E6&quot;</span> <span class="hljs-string">&quot;#28E2E5&quot;</span> <span class="hljs-string">&quot;#CD0BBC&quot;</span> <span class="hljs-string">&quot;#F5C710&quot;</span> <span class="hljs-string">&quot;gray62&quot;</span> <br><span class="hljs-operator">&gt;</span> palette<span class="hljs-punctuation">(</span>colors<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">10</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <span class="hljs-comment"># 重新设置调色板为 colors() 的前 10 种颜色</span><br><span class="hljs-operator">&gt;</span> palette<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-comment"># 更改后的调色板颜色</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;white&quot;</span>         <span class="hljs-string">&quot;aliceblue&quot;</span>     <span class="hljs-string">&quot;antiquewhite&quot;</span>  <span class="hljs-string">&quot;antiquewhite1&quot;</span> <span class="hljs-string">&quot;antiquewhite2&quot;</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">6</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;antiquewhite3&quot;</span> <span class="hljs-string">&quot;antiquewhite4&quot;</span> <span class="hljs-string">&quot;aquamarine&quot;</span>    <span class="hljs-string">&quot;aquamarine&quot;</span>    <span class="hljs-string">&quot;aquamarine2&quot;</span>  <br><span class="hljs-operator">&gt;</span> palette<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;default&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> lines<span class="hljs-punctuation">(</span>hh<span class="hljs-punctuation">,</span> <span class="hljs-number">22.5</span> <span class="hljs-operator">*</span> hh<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span>col <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><img src="/..%5Cimage%5C3.1.1.png" alt="3.1.1"></p><p>调色板的好处在于，我们可以在 R 中使用一个整数来表示颜色，而这个整数对应的颜色就是调色板中相应位置的颜色，比如在某作图函数中调用参数 <code>col = 2</code> 表示取调色板中第 2 种颜色。 若整数值超过了调色板颜色向量的长度，那么 R 会自动取该整数除以调色板颜色向量长度的余数。</p>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>碎金-R基础(2)</title>
    <link href="/2024/08/29/20240829%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(2)/"/>
    <url>/2024/08/29/20240829%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(2)/</url>
    
    <content type="html"><![CDATA[<h2 id="c-seq-rep"><a href="#c-seq-rep" class="headerlink" title="c, seq, rep"></a>c, seq, rep</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span>red <span class="hljs-operator">=</span> <span class="hljs-string">&quot;apple&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># 连接，转换不同类型向量</span><br><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-literal">FALSE</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;abc&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>seq<span class="hljs-punctuation">(</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">9</span><span class="hljs-punctuation">)</span><br>seq<span class="hljs-punctuation">(</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">10</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">10</span><span class="hljs-punctuation">,</span><span class="hljs-number">15</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment"># rep(1:2, c(10,10)) same as rep(1:2, each = 10)</span><br></code></pre></td></tr></table></figure><h2 id="dim-matrix-rownames-colnames-t"><a href="#dim-matrix-rownames-colnames-t" class="headerlink" title="dim, matrix, rownames, colnames, t"></a>dim, matrix, rownames, colnames, t</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs R">x <span class="hljs-operator">&lt;-</span> 1<span class="hljs-operator">:</span><span class="hljs-number">12</span><br><span class="hljs-built_in">dim</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">)</span><br>x <span class="hljs-operator">&lt;-</span> matrix<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> nrow<span class="hljs-operator">=</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span> byrow<span class="hljs-operator">=</span><span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><br>rownames<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">LETTERS</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span><br>t<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>矩阵以列存储，byrow按照行存储。t转置。</p><p>内置变量</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">month.abb</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Jan&quot;</span> <span class="hljs-string">&quot;Feb&quot;</span> <span class="hljs-string">&quot;Mar&quot;</span> <span class="hljs-string">&quot;Apr&quot;</span> <span class="hljs-string">&quot;May&quot;</span> <span class="hljs-string">&quot;Jun&quot;</span> <span class="hljs-string">&quot;Jul&quot;</span> <span class="hljs-string">&quot;Aug&quot;</span> <span class="hljs-string">&quot;Sep&quot;</span> <span class="hljs-string">&quot;Oct&quot;</span> <span class="hljs-string">&quot;Nov&quot;</span> <span class="hljs-string">&quot;Dec&quot;</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">month.name</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;January&quot;</span>   <span class="hljs-string">&quot;February&quot;</span>  <span class="hljs-string">&quot;March&quot;</span>     <span class="hljs-string">&quot;April&quot;</span>     <span class="hljs-string">&quot;May&quot;</span>       <span class="hljs-string">&quot;June&quot;</span>      <span class="hljs-string">&quot;July&quot;</span>     <br> <span class="hljs-punctuation">[</span><span class="hljs-number">8</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;August&quot;</span>    <span class="hljs-string">&quot;September&quot;</span> <span class="hljs-string">&quot;October&quot;</span>   <span class="hljs-string">&quot;November&quot;</span>  <span class="hljs-string">&quot;December&quot;</span> <br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">letters</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;a&quot;</span> <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-string">&quot;c&quot;</span> <span class="hljs-string">&quot;d&quot;</span> <span class="hljs-string">&quot;e&quot;</span> <span class="hljs-string">&quot;f&quot;</span> <span class="hljs-string">&quot;g&quot;</span> <span class="hljs-string">&quot;h&quot;</span> <span class="hljs-string">&quot;i&quot;</span> <span class="hljs-string">&quot;j&quot;</span> <span class="hljs-string">&quot;k&quot;</span> <span class="hljs-string">&quot;l&quot;</span> <span class="hljs-string">&quot;m&quot;</span> <span class="hljs-string">&quot;n&quot;</span> <span class="hljs-string">&quot;o&quot;</span> <span class="hljs-string">&quot;p&quot;</span> <span class="hljs-string">&quot;q&quot;</span> <span class="hljs-string">&quot;r&quot;</span> <span class="hljs-string">&quot;s&quot;</span> <span class="hljs-string">&quot;t&quot;</span> <span class="hljs-string">&quot;u&quot;</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">22</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;v&quot;</span> <span class="hljs-string">&quot;w&quot;</span> <span class="hljs-string">&quot;x&quot;</span> <span class="hljs-string">&quot;y&quot;</span> <span class="hljs-string">&quot;z&quot;</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">LETTERS</span><br> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;A&quot;</span> <span class="hljs-string">&quot;B&quot;</span> <span class="hljs-string">&quot;C&quot;</span> <span class="hljs-string">&quot;D&quot;</span> <span class="hljs-string">&quot;E&quot;</span> <span class="hljs-string">&quot;F&quot;</span> <span class="hljs-string">&quot;G&quot;</span> <span class="hljs-string">&quot;H&quot;</span> <span class="hljs-string">&quot;I&quot;</span> <span class="hljs-string">&quot;J&quot;</span> <span class="hljs-string">&quot;K&quot;</span> <span class="hljs-string">&quot;L&quot;</span> <span class="hljs-string">&quot;M&quot;</span> <span class="hljs-string">&quot;N&quot;</span> <span class="hljs-string">&quot;O&quot;</span> <span class="hljs-string">&quot;P&quot;</span> <span class="hljs-string">&quot;Q&quot;</span> <span class="hljs-string">&quot;R&quot;</span> <span class="hljs-string">&quot;S&quot;</span> <span class="hljs-string">&quot;T&quot;</span> <span class="hljs-string">&quot;U&quot;</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">22</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;V&quot;</span> <span class="hljs-string">&quot;W&quot;</span> <span class="hljs-string">&quot;X&quot;</span> <span class="hljs-string">&quot;Y&quot;</span> <span class="hljs-string">&quot;Z&quot;</span><br></code></pre></td></tr></table></figure><h2 id="因子"><a href="#因子" class="headerlink" title="因子"></a>因子</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> pain <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> fpain <span class="hljs-operator">&lt;-</span> factor<span class="hljs-punctuation">(</span>pain<span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> fpain<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br>Levels<span class="hljs-operator">:</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-operator">&gt;</span> levels<span class="hljs-punctuation">(</span>fpain<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;none&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;mild&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;medium&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;severe&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> fpain<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> none   severe medium medium mild  <br>Levels<span class="hljs-operator">:</span> none mild medium severe<br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>fpain<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-operator">&gt;</span> levels<span class="hljs-punctuation">(</span>fpain<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;none&quot;</span>   <span class="hljs-string">&quot;mild&quot;</span>   <span class="hljs-string">&quot;medium&quot;</span> <span class="hljs-string">&quot;severe&quot;</span><br></code></pre></td></tr></table></figure><p>R默认用排序的值， 一个因子的内置表达方式始终是从1开始的数字。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> ordered_x <span class="hljs-operator">&lt;-</span> ordered<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> levels <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;low&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;medium&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;high&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> ordered_x<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> low    medium high  <br>Levels<span class="hljs-operator">:</span> low <span class="hljs-operator">&lt;</span> medium <span class="hljs-operator">&lt;</span> high<br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>ordered_x<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-operator">&gt;</span> levels<span class="hljs-punctuation">(</span>ordered_x<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;low&quot;</span>    <span class="hljs-string">&quot;medium&quot;</span> <span class="hljs-string">&quot;high&quot;</span>  <br></code></pre></td></tr></table></figure><p><strong>在R中，默认因子水平是等距离的（通过生成多项式对照）</strong></p><h2 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> contrasts<span class="hljs-punctuation">(</span><br><span class="hljs-operator">+</span><br></code></pre></td></tr></table></figure><p>windows和macintosh下用esc，unix下用Ctrl+c，windows中RStudio不能用Ctrl+c，书上写错了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>碎金-R基础</title>
    <link href="/2024/08/28/20240828%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(1)/"/>
    <url>/2024/08/28/20240828%E7%A2%8E%E9%87%91-R%E5%9F%BA%E7%A1%80(1)/</url>
    
    <content type="html"><![CDATA[<h2 id="lines"><a href="#lines" class="headerlink" title="lines()"></a>lines()</h2><p>如果没有对数值进行排序，线段不会自动连接相邻的点，而是会在相隔很远的点间来回连接</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs R">weight <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">60</span><span class="hljs-punctuation">,</span><span class="hljs-number">72</span><span class="hljs-punctuation">,</span><span class="hljs-number">57</span><span class="hljs-punctuation">,</span><span class="hljs-number">90</span><span class="hljs-punctuation">,</span><span class="hljs-number">95</span><span class="hljs-punctuation">,</span><span class="hljs-number">72</span><span class="hljs-punctuation">)</span><br>height <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1.75</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.80</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.65</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.90</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.74</span><span class="hljs-punctuation">,</span><span class="hljs-number">1.91</span><span class="hljs-punctuation">)</span><br>plot<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">,</span> weight<span class="hljs-punctuation">)</span><br><span class="hljs-number">22.5</span><span class="hljs-operator">*</span>height<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">*</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>lines<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">,</span> <span class="hljs-number">22.5</span><span class="hljs-operator">*</span>height<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">*</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>dev.off<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>height<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">*</span>rnorm<span class="hljs-punctuation">(</span><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>hh <span class="hljs-operator">&lt;-</span> sort<span class="hljs-punctuation">(</span>height<span class="hljs-punctuation">)</span><br>hh<br>lines<span class="hljs-punctuation">(</span>hh<span class="hljs-punctuation">,</span> <span class="hljs-number">22.5</span> <span class="hljs-operator">*</span> hh<span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span>col <span class="hljs-operator">=</span> <span class="hljs-string">&quot;blue&quot;</span><span class="hljs-punctuation">)</span><br>save.image<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;F:/Web/Hexo_Blog/source/image/lines.png&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><img src="/../image/lines.png" alt="lines"></p><p>里面从左下向右上的蓝色直线是sort后的height值画出的。</p><p>根据lines的这个特点，可以自己来控制连线顺序，实现绘画。</p><h2 id="plot"><a href="#plot" class="headerlink" title="plot()"></a>plot()</h2><p>在<code>plot</code>函数中，未命名的参数使你能够灵活地传递额外的绘图参数。例如，你可以传递图形的颜色、类型、符号等选项：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">plot<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">10</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">10</span><span class="hljs-punctuation">,</span> col<span class="hljs-operator">=</span><span class="hljs-string">&quot;blue&quot;</span><span class="hljs-punctuation">,</span> pch<span class="hljs-operator">=</span><span class="hljs-number">19</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>在这个例子中，<code>col</code>和<code>pch</code>是<code>plot</code>函数的附加参数，指定点的颜色和符号。<code>plot</code>函数利用<code>...</code>来接受这些参数，使得它可以接受并处理不同类型的绘图设置，增加了灵活性。</p><p>…<br>arguments to be passed to methods, such as graphical parameters (see par).</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> plot.default<br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> y <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> type <span class="hljs-operator">=</span> <span class="hljs-string">&quot;p&quot;</span><span class="hljs-punctuation">,</span> xlim <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> ylim <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-built_in">log</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> main <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> sub <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> xlab <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> ylab <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> <br>    ann <span class="hljs-operator">=</span> par<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;ann&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> axes <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> frame.plot <span class="hljs-operator">=</span> axes<span class="hljs-punctuation">,</span> panel.first <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> <br>    panel.last <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">,</span> asp <span class="hljs-operator">=</span> <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> xgap.axis <span class="hljs-operator">=</span> <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> ygap.axis <span class="hljs-operator">=</span> <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> <br>    ...<span class="hljs-punctuation">)</span> <br></code></pre></td></tr></table></figure><h2 id="cat-print"><a href="#cat-print" class="headerlink" title="cat() &amp; print()"></a>cat() &amp; print()</h2><p>cat 适合用于创建格式化的输出，并且你可以精确控制输出格式，比如输出到文件或用户消息。print 更适合于查看对象的标准表示，调试时用于展示数据的结构和内容。</p><p>使用cat时，输出更“干净”且更具格式控制，而使用print时，输出更多信息且适合调试和查看对象内容。</p><p><code>cat</code> 函数在 R 中没有返回值。它的主要功能是将指定的文本直接打印到控制台或者写入文件，而不是返回任何数据或结果。<code>cat</code> 函数用于生成格式化的输出，但它不返回任何值，因此其返回值总是 <code>NULL</code>。但是<code>print</code>有返回值。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs R">read.1 <span class="hljs-operator">&lt;-</span> cat<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Bus&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>read.2 <span class="hljs-operator">&lt;-</span> cat<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple Bus Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>identical<span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">,</span> read.2<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.2<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.2<span class="hljs-punctuation">)</span><br>read.3 <span class="hljs-operator">&lt;-</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Bus&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>read.4 <span class="hljs-operator">&lt;-</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple Bus Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.4<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">)</span><br><span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.4<span class="hljs-punctuation">)</span><br>identical<span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">,</span>read.4<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这里identical比较的时候我以为cat有返回值，其实并不是，是null在比较。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> read.1 <span class="hljs-operator">==</span> read.2<br>logical<span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> identical<span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">,</span> read.2<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">TRUE</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">0</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.2<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">0</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.1<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;NULL&quot;</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.2<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;NULL&quot;</span><br><span class="hljs-operator">&gt;</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Bus&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple&quot;</span> <span class="hljs-string">&quot;Bus&quot;</span>   <span class="hljs-string">&quot;Cats&quot;</span> <br><span class="hljs-operator">&gt;</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Bus&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple&quot;</span> <span class="hljs-string">&quot;Bus&quot;</span>   <span class="hljs-string">&quot;Cats&quot;</span> <br><span class="hljs-operator">&gt;</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple Bus Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple Bus Cats&quot;</span><br><span class="hljs-operator">&gt;</span> read.3 <span class="hljs-operator">&lt;-</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Bus&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple&quot;</span> <span class="hljs-string">&quot;Bus&quot;</span>   <span class="hljs-string">&quot;Cats&quot;</span> <br><span class="hljs-operator">&gt;</span> read.4 <span class="hljs-operator">&lt;-</span> print<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Apple Bus Cats&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple Bus Cats&quot;</span><br><span class="hljs-operator">&gt;</span> read.3<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;Apple&quot;</span> <span class="hljs-string">&quot;Bus&quot;</span>   <span class="hljs-string">&quot;Cats&quot;</span> <br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">3</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>read.4<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;character&quot;</span><br><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">class</span><span class="hljs-punctuation">(</span>read.4<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;character&quot;</span><br><span class="hljs-operator">&gt;</span> identical<span class="hljs-punctuation">(</span>read.3<span class="hljs-punctuation">,</span>read.4<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-literal">FALSE</span><br></code></pre></td></tr></table></figure><p>这里想说，cat输出的时候字符向量不会有引号，而且”Apple”,”Bus”,”Cats”的输出不能和”Apple Bus Cats”区分。但是print可以。cat为了更美观的输出减少了信息。</p><h2 id="换行符"><a href="#换行符" class="headerlink" title="换行符"></a>换行符</h2><p>\n，用法</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Huey&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Dewey&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Louie&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>R更新后迁移R包,unname原函数解读</title>
    <link href="/2024/08/27/20240827R%E6%9B%B4%E6%96%B0%E5%90%8ER%E5%8C%85%E7%9A%84%E8%BF%81%E7%A7%BB/"/>
    <url>/2024/08/27/20240827R%E6%9B%B4%E6%96%B0%E5%90%8ER%E5%8C%85%E7%9A%84%E8%BF%81%E7%A7%BB/</url>
    
    <content type="html"><![CDATA[<p><strong>Important: don’t do this on a production machine</strong></p><blockquote><p>What is the danger of copy-pasting packages to a new library location?</p></blockquote><p>For individual work, the risk of doing this is quite low. As already mentioned, some packages will need recompilation due to the internal changes in R-3.5.0. This may lead to runtime errors - so this is the risk you take.</p><p>But one strategy is to copy-paste, then run</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r">update.packages<span class="hljs-punctuation">(</span>ask <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>Your second question is:</p><blockquote><p>How can I script the installation of all my packages?</p></blockquote><p>Try something like this, where points to the library of your previous release of R<code>lib_loc</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs r">lib_loc <span class="hljs-operator">&lt;-</span> <span class="hljs-string">&quot;C:/Users/apdev/Documents/R/win-library/3.3&quot;</span><br>to_install <span class="hljs-operator">&lt;-</span> unname<span class="hljs-punctuation">(</span>installed.packages<span class="hljs-punctuation">(</span>lib.loc <span class="hljs-operator">=</span> lib_loc<span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Package&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><br>to_install<br>install.packages<span class="hljs-punctuation">(</span>pkgs <span class="hljs-operator">=</span> to_install<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>installed.packages<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>           Package      LibPath                        Version <br>abind      <span class="hljs-string">&quot;abind&quot;</span>      <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;1.4-5&quot;</span> <br>admisc     <span class="hljs-string">&quot;admisc&quot;</span>     <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;0.35&quot;</span>  <br>ADPclust   <span class="hljs-string">&quot;ADPclust&quot;</span>   <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;0.7&quot;</span>   <br>affxparser <span class="hljs-string">&quot;affxparser&quot;</span> <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;1.76.0&quot;</span><br>affy       <span class="hljs-string">&quot;affy&quot;</span>       <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;1.82.0&quot;</span><br>affyio     <span class="hljs-string">&quot;affyio&quot;</span>     <span class="hljs-string">&quot;E:/R/R-4.4.1/R-4.4.1/library&quot;</span> <span class="hljs-string">&quot;1.74.0&quot;</span><br>           Priority<br>abind      <span class="hljs-literal">NA</span>      <br>admisc     <span class="hljs-literal">NA</span>      <br>ADPclust   <span class="hljs-literal">NA</span>      <br>affxparser <span class="hljs-literal">NA</span>      <br>affy       <span class="hljs-literal">NA</span>      <br>affyio     <span class="hljs-literal">NA</span>      <br>           Depends                                                     <br>abind      <span class="hljs-string">&quot;R (&gt;= 1.5.0)&quot;</span>                                              <br>admisc     <span class="hljs-string">&quot;R (&gt;= 3.5.0)&quot;</span>                                              <br>ADPclust   <span class="hljs-string">&quot;R (&gt;= 3.0.0),&quot;</span>                                             <br>affxparser <span class="hljs-string">&quot;R (&gt;= 2.14.0)&quot;</span>                                             <br>affy       <span class="hljs-string">&quot;R (&gt;= 2.8.0), BiocGenerics (&gt;= 0.1.12), Biobase (&gt;= 2.5.5)&quot;</span><br>affyio     <span class="hljs-string">&quot;R (&gt;= 2.6.0)&quot;</span>                                              <br>           Imports                                                                                                 <br>abind      <span class="hljs-string">&quot;methods, utils&quot;</span>                                                                                        <br>admisc     <span class="hljs-string">&quot;methods&quot;</span>                                                                                               <br>ADPclust   <span class="hljs-string">&quot;dplyr, cluster, fields, knitr&quot;</span>                                                                         <br>affxparser <span class="hljs-literal">NA</span>                                                                                                      <br>affy       <span class="hljs-string">&quot;affyio (&gt;= 1.13.3), BiocManager, graphics, grDevices, methods,\npreprocessCore, stats, utils, zlibbioc&quot;</span><br>affyio     <span class="hljs-string">&quot;zlibbioc, methods&quot;</span>                                                                                     <br>           LinkingTo       <br>abind      <span class="hljs-literal">NA</span>              <br>admisc     <span class="hljs-literal">NA</span>              <br>ADPclust   <span class="hljs-literal">NA</span>              <br>affxparser <span class="hljs-literal">NA</span>              <br>affy       <span class="hljs-string">&quot;preprocessCore&quot;</span><br>affyio     <span class="hljs-literal">NA</span>              <br>           Suggests                                                       <br>abind      <span class="hljs-literal">NA</span>                                                             <br>admisc     <span class="hljs-string">&quot;QCA (&gt;= 3.7)&quot;</span>                                                 <br>ADPclust   <span class="hljs-string">&quot;rmarkdown, testthat&quot;</span>                                          <br>affxparser <span class="hljs-string">&quot;R.oo (&gt;= 1.22.0), R.utils (&gt;= 2.7.0), AffymetrixDataTestFiles&quot;</span><br>affy       <span class="hljs-string">&quot;tkWidgets (&gt;= 1.19.0), affydata, widgetTools, hgu95av2cdf&quot;</span>    <br>affyio     <span class="hljs-literal">NA</span>                                                             <br>           Enhances License         License_is_FOSS<br>abind      <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;LGPL (&gt;= 2)&quot;</span>   <span class="hljs-literal">NA</span>             <br>admisc     <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;GPL (&gt;= 3)&quot;</span>    <span class="hljs-literal">NA</span>             <br>ADPclust   <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;GPL (&gt;= 2)&quot;</span>    <span class="hljs-literal">NA</span>             <br>affxparser <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;LGPL (&gt;= 2)&quot;</span>   <span class="hljs-literal">NA</span>             <br>affy       <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;LGPL (&gt;= 2.0)&quot;</span> <span class="hljs-literal">NA</span>             <br>affyio     <span class="hljs-literal">NA</span>       <span class="hljs-string">&quot;LGPL (&gt;= 2)&quot;</span>   <span class="hljs-literal">NA</span>             <br>           License_restricts_use OS_type MD5sum NeedsCompilation<br>abind      <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;no&quot;</span>            <br>admisc     <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;yes&quot;</span>           <br>ADPclust   <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;no&quot;</span>            <br>affxparser <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;yes&quot;</span>           <br>affy       <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;yes&quot;</span>           <br>affyio     <span class="hljs-literal">NA</span>                    <span class="hljs-literal">NA</span>      <span class="hljs-literal">NA</span>     <span class="hljs-string">&quot;yes&quot;</span>           <br>           Built  <br>abind      <span class="hljs-string">&quot;4.3.1&quot;</span><br>admisc     <span class="hljs-string">&quot;4.3.3&quot;</span><br>ADPclust   <span class="hljs-string">&quot;4.3.3&quot;</span><br>affxparser <span class="hljs-string">&quot;4.3.2&quot;</span><br>affy       <span class="hljs-string">&quot;4.3.2&quot;</span><br>affyio     <span class="hljs-string">&quot;4.3.2&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>installed.packages<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Package&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><br>       abind       admisc     ADPclust   affxparser         affy <br>     <span class="hljs-string">&quot;abind&quot;</span>     <span class="hljs-string">&quot;admisc&quot;</span>   <span class="hljs-string">&quot;ADPclust&quot;</span> <span class="hljs-string">&quot;affxparser&quot;</span>       <span class="hljs-string">&quot;affy&quot;</span> <br>      affyio <br>    <span class="hljs-string">&quot;affyio&quot;</span> <br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-operator">&gt;</span> unname<span class="hljs-punctuation">(</span>installed.packages<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;Package&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><br>  <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;abind&quot;</span>                               <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;admisc&quot;</span>                              <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;ADPclust&quot;</span>                            <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;affxparser&quot;</span>                          <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;affy&quot;</span>                                <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">6</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;affyio&quot;</span>                              <br>  <span class="hljs-punctuation">[</span><span class="hljs-number">7</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;airway&quot;</span>  <br></code></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> unname<br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">,</span> force <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">is.null</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        <span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-literal">NULL</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">is.null</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">dimnames</span><span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-punctuation">(</span>force <span class="hljs-operator">||</span> <span class="hljs-operator">!</span>is.data.frame<span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        <span class="hljs-built_in">dimnames</span><span class="hljs-punctuation">(</span>obj<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-literal">NULL</span><br>    obj<br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>if (!is.null(dimnames(obj)) &amp;&amp; (force || !is.data.frame(obj)))          dimnames(obj) &lt;- NULL</code></p><p>这段代码的意思是：如果 <code>obj</code> 对象的维度名称（<code>dimnames</code>）不为空，并且 <code>force</code> 为真或者 <code>obj</code> 不是数据框（<code>data.frame</code>），那么就将 <code>obj</code> 的维度名称设为 <code>NULL</code>。换句话说，如果 <code>obj</code> 有维度名称，并且满足条件，就移除这些维度名称。</p><p><code>dimnames()</code> 用于获取或设置数据结构（如矩阵或数组）的维度名称（行名和列名）。<code>names()</code> 则用于获取或设置向量、列表、数据框的元素名称。简单来说，<code>dimnames()</code> 处理的是多维数据的维度标签，而 <code>names()</code> 处理的是单维数据的元素标签。</p>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rm()原函数代码解读（下）</title>
    <link href="/2024/08/26/rm(2)/"/>
    <url>/2024/08/26/rm(2)/</url>
    
    <content type="html"><![CDATA[<h2 id="一、原函数"><a href="#一、原函数" class="headerlink" title="一、原函数"></a>一、原函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">,</span> <span class="hljs-built_in">list</span> <span class="hljs-operator">=</span> character<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> pos <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> envir <span class="hljs-operator">=</span> <span class="hljs-built_in">as.environment</span><span class="hljs-punctuation">(</span>pos<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>    inherits <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>...length<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>        dots <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>        <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">all</span><span class="hljs-punctuation">(</span>vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>            stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;... must contain names or character strings&quot;</span><span class="hljs-punctuation">)</span><br>        <span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> .Primitive<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;c&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-punctuation">&#125;</span><br>    .Internal<span class="hljs-punctuation">(</span>remove<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> envir<span class="hljs-punctuation">,</span> inherits<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>我现在发现，rm和vapply等等函数其实都是R的内置函数，前面的判断条件都是为了保证函数能够正常运行的。内置函数的源代码不能直接在控制台查看。</p><p>但是前面的这些控制条件的代码也是非常值得学习的。</p><h2 id="二、-逻辑运算符"><a href="#二、-逻辑运算符" class="headerlink" title="二、|| 逻辑运算符"></a>二、|| 逻辑运算符</h2><p>在 R 语言中，<code>||</code> 是逻辑运算符，用于执行逻辑“或”操作。与 <code>|</code>（元素级逻辑或）不同，<code>||</code> 是短路运算符，只用于处理长度为 1 的逻辑值，并在第一个条件为 <code>TRUE</code> 时停止评估后续条件。</p><p>具体来说：</p><ul><li><code>||</code> 会首先评估左边的条件。如果左边的条件为 <code>TRUE</code>，则整个表达式的结果为 <code>TRUE</code>，并且右边的条件不会被评估。这称为“短路”行为。</li><li>如果左边的条件为 <code>FALSE</code>，才会评估右边的条件。</li></ul><p>这种短路行为对于提高计算效率很有用，特别是在右边的条件可能涉及到昂贵或不必要的计算时。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R">x <span class="hljs-operator">&lt;-</span> <span class="hljs-literal">TRUE</span><br>y <span class="hljs-operator">&lt;-</span> stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;This will not be executed&quot;</span><span class="hljs-punctuation">)</span><br>result <span class="hljs-operator">&lt;-</span> x <span class="hljs-operator">||</span> y  <span class="hljs-comment"># 由于 x 为 TRUE，y 不会被评估，结果为 TRUE</span><br></code></pre></td></tr></table></figure><h2 id="三、vapply"><a href="#三、vapply" class="headerlink" title="三、vapply"></a>三、vapply</h2><p>vapply是将指定函数用在list中每一个元素上的函数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> vapply<br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> FUN.VALUE<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    FUN <span class="hljs-operator">&lt;-</span> match.fun<span class="hljs-punctuation">(</span>FUN<span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span>is.vector<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.object</span><span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        X <span class="hljs-operator">&lt;-</span> as.list<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span><br>    .Internal<span class="hljs-punctuation">(</span>vapply<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> FUN.VALUE<span class="hljs-punctuation">,</span> USE.NAMES<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>lapply</code> returns a list of the same length as <code>X</code>, each element of which is the result of applying <code>FUN</code> to the corresponding element of <code>X</code>.</p><p><code>sapply</code> is a user-friendly version and wrapper of <code>lapply</code> by default returning a vector, matrix or, if <code>simplify = &quot;array&quot;</code>, an array if appropriate, by applying <code>simplify2array()</code>. <code>sapply(x, f, simplify = FALSE, USE.NAMES = FALSE)</code> is the same as <code>lapply(x, f)</code>.</p><p><code>vapply</code> is similar to <code>sapply</code>, but has a pre-specified type of return value, so it can be safer (and sometimes faster) to use.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> lapply<br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    FUN <span class="hljs-operator">&lt;-</span> match.fun<span class="hljs-punctuation">(</span>FUN<span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span>is.vector<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.object</span><span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        X <span class="hljs-operator">&lt;-</span> as.list<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span><br>    .Internal<span class="hljs-punctuation">(</span>lapply<span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="四、sapply"><a href="#四、sapply" class="headerlink" title="四、sapply"></a>四、sapply</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> sapply<br><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">,</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">,</span> simplify <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    FUN <span class="hljs-operator">&lt;-</span> match.fun<span class="hljs-punctuation">(</span>FUN<span class="hljs-punctuation">)</span><br>    answer <span class="hljs-operator">&lt;-</span> lapply<span class="hljs-punctuation">(</span>X <span class="hljs-operator">=</span> X<span class="hljs-punctuation">,</span> FUN <span class="hljs-operator">=</span> FUN<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>USE.NAMES <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>X<span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-built_in">is.null</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>answer<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        <span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>answer<span class="hljs-punctuation">)</span> <span class="hljs-operator">&lt;-</span> X<br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span>isFALSE<span class="hljs-punctuation">(</span>simplify<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>        simplify2array<span class="hljs-punctuation">(</span>answer<span class="hljs-punctuation">,</span> higher <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span>simplify <span class="hljs-operator">==</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-keyword">else</span> answer<br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong><code>FUN &lt;- match.fun(FUN)</code></strong><br>将 <code>FUN</code> 转换为实际的函数对象。如果 <code>FUN</code> 是函数名（字符串），它会被转换为对应的函数。</p><p><strong><code>answer &lt;- lapply(X = X, FUN = FUN, ...)</code></strong><br>使用 <code>lapply</code> 对 <code>X</code> 的每个元素应用 <code>FUN</code>。<code>...</code> 表示可以传递额外的参数给 <code>FUN</code>。</p><p><strong><code>if (USE.NAMES &amp;&amp; is.character(X) &amp;&amp; is.null(names(answer))) names(answer) &lt;- X</code></strong><br>如果 <code>USE.NAMES</code> 为 <code>TRUE</code>，<code>X</code> 是字符型，并且 <code>answer</code> 还没有名称，则将 <code>X</code> 作为 <code>answer</code> 的名字。</p><p><strong><code>if (!isFALSE(simplify)) simplify2array(answer, higher = (simplify == &quot;array&quot;))</code></strong><br>如果 <code>simplify</code> 不是 <code>FALSE</code>，则使用 <code>simplify2array</code> 来简化结果为数组或矩阵。<code>simplify == &quot;array&quot;</code> 确定是否将结果简化为数组（当 <code>simplify</code> 等于 <code>&quot;array&quot;</code> 时）。</p><p><strong><code>else answer</code></strong><br>如果 <code>simplify</code> 为 <code>FALSE</code>，则返回原始的列表 <code>answer</code>。</p><h2 id="五、-和-逻辑运算符"><a href="#五、-和-逻辑运算符" class="headerlink" title="五、&amp;和&amp;&amp; 逻辑运算符"></a>五、&amp;和&amp;&amp; 逻辑运算符</h2><p>在 R 语言中，<code>&amp;&amp;</code> 是逻辑运算符，用于执行逻辑“与”操作（AND）。</p><p><code>&amp;&amp;</code> 用于逻辑“与”操作的短路版本，适用于单一的逻辑比较。</p><p><code>&amp;</code> 是元素级逻辑“与”操作，适用于向量化的逻辑比较，并且不会短路，即它会逐个元素进行比较。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># 使用 &amp;&amp;（短路运算）</span><br>x <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br>y <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br><br>result <span class="hljs-operator">&lt;-</span> x <span class="hljs-operator">&amp;&amp;</span> y<br><span class="hljs-comment"># result 为 TRUE，因为 &amp;&amp; 只取第一个元素进行逻辑比较</span><br><br><span class="hljs-comment"># 使用 &amp;（元素级运算）</span><br>result <span class="hljs-operator">&lt;-</span> x <span class="hljs-operator">&amp;</span> y<br><span class="hljs-comment"># result 为 c(TRUE, FALSE)，逐元素比较 x 和 y</span><br></code></pre></td></tr></table></figure><h2 id="六、vapply-中-FUN-VALUE-为-NA"><a href="#六、vapply-中-FUN-VALUE-为-NA" class="headerlink" title="六、vapply 中 FUN.VALUE 为 NA"></a>六、vapply 中 FUN.VALUE 为 NA</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs R">vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>       <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h3 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h3><ul><li>**<code>NA</code>**：这是 <code>vapply</code> 的 <code>FUN.VALUE</code> 参数，指定了函数返回值的预期类型。这里的 <code>NA</code> 表示一个缺失值（通常用于表示未指定或未知的值类型）。</li></ul><h3 id="FUN-VALUE-的作用"><a href="#FUN-VALUE-的作用" class="headerlink" title="FUN.VALUE 的作用"></a><code>FUN.VALUE</code> 的作用</h3><p>在 <code>vapply</code> 中，<code>FUN.VALUE</code> 是一个示例值，定义了 <code>vapply</code> 期望函数 <code>FUN</code> 返回的结果的类型。<code>vapply</code> 使用 <code>FUN.VALUE</code> 来确定最终结果的结构。<code>NA</code> 在这种情况下通常用于表示期望的结果类型为逻辑型向量，因为函数 <code>is.symbol</code> 和 <code>is.character</code> 都返回逻辑值。</p><h3 id="为什么使用-NA"><a href="#为什么使用-NA" class="headerlink" title="为什么使用 NA"></a>为什么使用 <code>NA</code></h3><p>在 <code>vapply</code> 中使用 <code>NA</code> 来指定返回值的类型可以用于省略对具体类型的明确定义。如果你确定函数的返回值是逻辑型的，那么可以使用 <code>logical(1)</code> 来明确指定。例如：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> logical<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这里，<code>logical(1)</code> 指定了返回值的类型为长度为 1 的逻辑向量，而 <code>NA</code> 通常在示例中用来表示未具体化的类型。</p><h2 id="七、rm中的逻辑判断"><a href="#七、rm中的逻辑判断" class="headerlink" title="七、rm中的逻辑判断"></a>七、rm中的逻辑判断</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">all</span><span class="hljs-punctuation">(</span>vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>            stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;... must contain names or character strings&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>所有的dots都是symbol或者character，那么all()返回TRUE，!all()为FALSE，stop函数不执行，如果有一个不是symbol或者character，那么all返回F，!all()为T，stop函数执行。</p><h2 id="八、stop函数"><a href="#八、stop函数" class="headerlink" title="八、stop函数"></a>八、stop函数</h2><p>在 R 语言中，<code>stop</code> 函数用于生成错误消息并停止函数的执行。它常用于在检测到问题或不符合条件时，向用户报告错误并终止当前的计算过程。<code>stop</code> 函数是错误处理的核心函数之一，帮助确保代码在遇到问题时能够及时中断，并提供有用的错误信息。</p><h3 id="函数语法"><a href="#函数语法" class="headerlink" title="函数语法"></a>函数语法</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">stop<span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">,</span> call. <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> domain <span class="hljs-operator">=</span> <span class="hljs-literal">NULL</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><h3 id="参数解释-1"><a href="#参数解释-1" class="headerlink" title="参数解释"></a>参数解释</h3><ul><li>**<code>...</code>**：要传递给 <code>stop</code> 函数的错误消息。可以是字符串或任何其他类型的对象，它们会被转换为字符串并作为错误消息显示。</li><li>**<code>call.</code>**：逻辑值，表示是否在错误消息中显示出错的调用栈。默认值是 <code>TRUE</code>，表示在错误消息中包含函数调用信息，这对于调试非常有用。</li><li>**<code>domain</code>**：用于国际化的参数，通常不需要修改。它指定了错误消息的翻译域，默认是 <code>NULL</code>，表示使用 R 的默认翻译设置。</li></ul><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ol><li><p><strong>基本使用</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs R">x <span class="hljs-operator">&lt;-</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>x <span class="hljs-operator">&lt;</span> <span class="hljs-number">0</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;x cannot be negative&quot;</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>在这个示例中，如果 <code>x</code> 小于 0，<code>stop</code> 会生成一个错误消息 <code>&quot;x cannot be negative&quot;</code> 并终止程序的执行。</p><p>注意，这里没有在错误信息里包含调用堆栈信息，因为这里没有错误，只是停止执行了。</p></li><li><p><strong>带有调试信息的错误</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs R">my_function <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>x <span class="hljs-operator">&lt;</span> <span class="hljs-number">0</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>        stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;x cannot be negative&quot;</span><span class="hljs-punctuation">,</span> call. <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-built_in">return</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">sqrt</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br><br>my_function<span class="hljs-punctuation">(</span><span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这里，<code>call. = TRUE</code> 会在错误消息中包含调用堆栈信息，帮助用户了解错误发生的位置。</p></li><li><p><strong>多参数错误消息</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs R">x <span class="hljs-operator">&lt;-</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><br>stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;The value of x is &quot;</span><span class="hljs-punctuation">,</span> x<span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;. It must be non-negative.&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><code>stop</code> 可以接受多个参数，这些参数会被自动拼接成一个完整的错误消息。</p></li></ol><h2 id="九、调用堆栈信息"><a href="#九、调用堆栈信息" class="headerlink" title="九、调用堆栈信息"></a>九、调用堆栈信息</h2><p>调用堆栈信息（Call Stack Information）是指在程序执行过程中，函数调用的记录。这些记录展示了程序执行时的函数调用路径，从最初的调用到当前的函数。调用堆栈信息对于调试和错误排查非常有用，因为它提供了错误发生时的上下文和函数调用的顺序。</p><h3 id="调用堆栈的基本概念"><a href="#调用堆栈的基本概念" class="headerlink" title="调用堆栈的基本概念"></a>调用堆栈的基本概念</h3><ol><li><strong>调用堆栈的结构</strong>：<ul><li><strong>栈帧</strong>：每个函数调用在调用堆栈中被称为一个“栈帧”或“调用帧”。每个栈帧包含了函数的调用信息，包括参数值、局部变量、返回地址等。</li><li><strong>栈的顺序</strong>：调用堆栈的结构是一个“栈”数据结构，后进先出（LIFO）。这意味着最上面的栈帧是当前正在执行的函数，下面的栈帧是调用该函数的函数，依此类推。</li></ul></li><li><strong>函数调用的顺序</strong>：<ul><li>当函数 A 调用函数 B，函数 B 的栈帧会被推到调用堆栈的顶部。</li><li>当函数 B 执行完成并返回，B 的栈帧会被从堆栈中弹出，控制返回到函数 A。</li></ul></li><li><strong>错误的调用堆栈信息</strong>：<ul><li>当程序遇到错误时，调用堆栈信息可以帮助开发人员理解错误发生的上下文。例如，错误可能发生在某个深层嵌套的函数中，通过调用堆栈可以追溯到最初的函数调用。</li></ul></li></ol><h3 id="在-R-中查看调用堆栈信息"><a href="#在-R-中查看调用堆栈信息" class="headerlink" title="在 R 中查看调用堆栈信息"></a>在 R 中查看调用堆栈信息</h3><p>在 R 中，调用堆栈信息可以通过几个方法查看：</p><ol><li><p>**使用 <code>traceback()</code>**：</p><ul><li><code>traceback()</code> 函数显示最近发生的错误的调用堆栈。它可以帮助你查看错误发生时的函数调用路径。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">r</span>复制代码my_function &lt;- <span class="hljs-built_in">function</span>(x) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-attribute">x</span> &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-selector-tag">stop</span>(<span class="hljs-string">&quot;x cannot be negative&quot;</span>)<br>    &#125;<br>    <span class="hljs-built_in">sqrt</span>(<span class="hljs-attribute">x</span>)<br>&#125;<br><br><span class="hljs-built_in">tryCatch</span>(&#123;<br>    <span class="hljs-built_in">my_function</span>(-<span class="hljs-number">1</span>)<br>&#125;, error = <span class="hljs-built_in">function</span>(e) &#123;<br>    <span class="hljs-built_in">traceback</span>()<br>&#125;)<br></code></pre></td></tr></table></figure><p>在这个例子中，<code>traceback()</code> 会显示 <code>my_function</code> 调用的堆栈信息，帮助了解错误发生的上下文。</p></li><li><p><strong>在错误消息中</strong>：</p><ul><li>默认情况下，R 的 <code>stop</code> 函数在错误消息中包含调用堆栈信息。如果你没有设置 <code>call. = FALSE</code>，调用堆栈信息会自动包含在错误输出中。</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">r</span>复制代码my_function &lt;- <span class="hljs-built_in">function</span>(x) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-attribute">x</span> &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-selector-tag">stop</span>(<span class="hljs-string">&quot;x cannot be negative&quot;</span>)<br>    &#125;<br>    <span class="hljs-built_in">sqrt</span>(<span class="hljs-attribute">x</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">my_function</span><span class="hljs-params">(-<span class="hljs-number">1</span>)</span></span><br></code></pre></td></tr></table></figure><p>如果你直接在控制台运行 <code>my_function(-1)</code>，R 会显示错误消息和调用堆栈信息。</p></li><li><p><strong>使用调试工具</strong>：</p><ul><li>调试工具（如 <code>debug()</code>, <code>trace()</code> 和 <code>browser()</code>）可以提供更详细的调用堆栈信息，在调试复杂问题时非常有用。</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-attribute">r</span>复制代码<span class="hljs-built_in">debug</span>(my_function)<br><span class="hljs-built_in">my_function</span>(-<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><code>debug()</code> 会进入调试模式，逐步执行函数并显示调用堆栈信息。</p></li></ol><h2 id="十、倒数第二行"><a href="#十、倒数第二行" class="headerlink" title="十、倒数第二行"></a>十、倒数第二行</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> .Primitive<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;c&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><ol><li><p><strong><code>.Primitive(&quot;c&quot;)</code></strong>:</p><ul><li><code>.Primitive</code> 是 R 中的一个内部函数，用于表示 R 语言的原始（基础）函数。</li><li><code>&quot;c&quot;</code> 是 <code>c()</code> 函数的名字。<code>c()</code> 函数在 R 中用于将多个元素合并成一个向量。通过 <code>.Primitive(&quot;c&quot;)</code>，你可以直接调用 <code>c()</code> 函数。</li><li>使用 <code>.Primitive(&quot;c&quot;)</code> 可以避免函数的额外包装或附加行为，直接操作底层的函数实现。</li></ul></li><li><p><strong><code>vapply(dots, as.character, &quot;&quot;)</code></strong>:</p><ul><li><code>vapply</code> 是一个 R 函数，用于将函数应用于列表或向量的每个元素，并将结果简化为指定类型的对象。</li><li><code>dots</code> 是要操作的列表或向量。</li><li><code>as.character</code> 是应用于 <code>dots</code> 中每个元素的函数，将每个元素转换为字符型。</li><li><strong><code>&quot;&quot;</code> 是 <code>vapply</code> 的 <code>FUN.VALUE</code> 参数，指定了 <code>as.character</code> 函数返回值的类型（在这里是字符型的空字符串）。它表示 <code>vapply</code> 期望的结果是一个字符型的向量。</strong></li></ul></li><li><p><strong><code>list &lt;- .Primitive(&quot;c&quot;)(list, vapply(dots, as.character, &quot;&quot;))</code></strong>:</p><ul><li>这行代码的目的是将 <code>list</code> 和通过 <code>vapply</code> 转换后的 <code>dots</code> 的结果合并成一个新的列表。</li><li><code>vapply(dots, as.character, &quot;&quot;)</code> 处理了 <code>dots</code> 中的每个元素，并将其转换为字符型向量。</li><li><code>.Primitive(&quot;c&quot;)(list, vapply(dots, as.character, &quot;&quot;))</code> 调用 <code>c()</code> 函数将 <code>list</code> 和转换后的结果连接起来，生成一个新的列表。</li></ul></li></ol><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>假设 <code>dots</code> 是一个包含多个对象的列表，我们想将这些对象转换为字符型并将其附加到现有的 <code>list</code> 中：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-comment"># 示例数据</span><br>dots <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span><br><span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;a&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;b&quot;</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-comment"># 使用 vapply 和 .Primitive(&quot;c&quot;) 进行合并</span><br><span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> .Primitive<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;c&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>print<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><strong>解释：</strong></p><ul><li><code>vapply(dots, as.character, &quot;&quot;)</code> 将 <code>dots</code> 中的每个元素转换为字符型，并返回一个字符型向量 <code>c(&quot;1&quot;, &quot;2&quot;, &quot;three&quot;, &quot;4&quot;)</code>。</li><li><code>.Primitive(&quot;c&quot;)(list, c(&quot;1&quot;, &quot;2&quot;, &quot;three&quot;, &quot;4&quot;))</code> 将现有的 <code>list</code> 和这个字符型向量合并，生成一个新的列表 <code>list</code>。</li></ul><p><strong>结果：</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-punctuation">[[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;a&quot;</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;b&quot;</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;1&quot;</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;2&quot;</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;three&quot;</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">6</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;4&quot;</span><br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li><code>.Primitive(&quot;c&quot;)</code> 是对基础 <code>c()</code> 函数的直接调用，避免了额外的包装。</li><li><code>vapply(dots, as.character, &quot;&quot;)</code> 将 <code>dots</code> 中的每个元素转换为字符型，并简化为一个字符型向量。</li><li>结合这两个部分，代码实现了将现有列表 <code>list</code> 和转换后的 <code>dots</code> 合并为一个新的列表。</li></ul><h2 id="十一、最后一行"><a href="#十一、最后一行" class="headerlink" title="十一、最后一行"></a>十一、最后一行</h2><p><code>.Internal(remove(list, envir, inherits))</code> 是 <code>remove</code> 函数在底层的实现调用，处理对象的实际删除操作。</p>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/08/25/hello-world/"/>
    <url>/2024/08/25/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rm()原函数代码解读（上）</title>
    <link href="/2024/08/25/rm/"/>
    <url>/2024/08/25/rm/</url>
    
    <content type="html"><![CDATA[<h2 id="一、原函数"><a href="#一、原函数" class="headerlink" title="一、原函数"></a>一、原函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-keyword">function</span> <span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">,</span> <span class="hljs-built_in">list</span> <span class="hljs-operator">=</span> character<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> pos <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> envir <span class="hljs-operator">=</span> <span class="hljs-built_in">as.environment</span><span class="hljs-punctuation">(</span>pos<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>    inherits <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span> <br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>...length<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>        dots <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>        <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-built_in">all</span><span class="hljs-punctuation">(</span>vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-built_in">is.symbol</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">is.character</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> USE.NAMES <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <br>            stop<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;... must contain names or character strings&quot;</span><span class="hljs-punctuation">)</span><br>        <span class="hljs-built_in">list</span> <span class="hljs-operator">&lt;-</span> .Primitive<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;c&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> vapply<span class="hljs-punctuation">(</span>dots<span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">,</span> <br>            <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br>    <span class="hljs-punctuation">&#125;</span><br>    .Internal<span class="hljs-punctuation">(</span>remove<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">,</span> envir<span class="hljs-punctuation">,</span> inherits<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong>function (…, list &#x3D; character(), pos &#x3D; -1, envir &#x3D; as.environment(pos), inherits &#x3D; FALSE)</strong>: 这是一个函数定义，有几个参数：</p><ul><li><code>...</code> 允许传递任意数量的参数。</li><li><code>list</code> 被初始化为一个空的字符向量 (<code>character()</code>).</li><li><code>pos</code> 默认为 <code>-1</code>，在 R 中通常表示全局环境。</li><li><code>envir</code> 默认为由 <code>pos</code> 指定的环境，通过 <code>as.environment()</code> 转换为环境对象。</li><li><code>inherits</code> 是一个逻辑参数，指示是否在父环境中进行查找。</li></ul><p><strong>if (…length())</strong>: 这行代码检查是否有传递任何 <code>...</code> 参数。<code>...length()</code> 用于获取传递的参数数量。</p><blockquote><h3 id="参数"><a href="#参数" class="headerlink" title="... 参数"></a><code>...</code> 参数</h3><p><code>...</code> 在 R 函数中用于接收任意数量的参数。这些参数可以是任何类型的对象。</p><h3 id="length"><a href="#length" class="headerlink" title="...length()"></a><code>...length()</code></h3><p><code>...length()</code> 是一个 R 内部的特殊功能，它用来获取 <code>...</code> 中参数的个数。虽然在 R 的标准文档中，通常使用 <code>length(list(...))</code> 来获取 <code>...</code> 参数的数量，但 <code>...length()</code> 是一个内部函数，用于更直接地获取这个数量。</p><p>在正常的函数定义中，<code>...</code> 的参数被视为一个捕获所有附加参数的列表。为了检查 <code>...</code> 中是否有参数，你可以使用 <code>...length()</code> 这个内部函数来直接获得它的长度。</p></blockquote><blockquote><p> <code>if (...length())</code> 的工作方式：</p><ol><li><strong>检查 <code>...</code> 的长度</strong>：<ul><li><code>...length()</code> 返回 <code>...</code> 参数的个数。</li><li>如果返回值大于零，表示 <code>...</code> 中有参数。</li></ul></li><li><strong>条件判断</strong>：<ul><li><code>if (...length())</code> 用来检查 <code>...</code> 中是否有传递的参数。如果 <code>...</code> 中有参数，<code>...length()</code> 将返回一个大于零的值，这样 <code>if</code> 条件成立。</li><li>如果 <code>...</code> 中没有参数，<code>...length()</code> 将返回零，<code>if</code> 条件不成立，程序将跳过相关的代码块。<code>match.call</code> 函数</li></ul></li></ol></blockquote><p><code>match.call</code> 是一个函数，它用于获取当前函数调用的表达式。这个函数返回一个包含函数调用的语言对象（<code>call</code> 对象），这个对象描述了函数的名称、参数及其对应的值。它可以帮助你查看函数是如何被调用的，包括所有传递的参数及其值。</p><h3 id="expand-dots-参数"><a href="#expand-dots-参数" class="headerlink" title="expand.dots 参数"></a><code>expand.dots</code> 参数</h3><p><code>expand.dots</code> 是 <code>match.call</code> 函数的一个参数。它控制 <code>...</code> （省略号）参数的处理方式：</p><ul><li>**<code>expand.dots = TRUE</code>**（默认值）：<code>...</code> 参数会被展开，并被包含在 <code>call</code> 对象中。例如，如果你传递了 <code>a, b</code> 作为 <code>...</code> 的参数，它们会被展开并作为独立的参数显示。</li><li>**<code>expand.dots = FALSE</code>**：<code>...</code> 参数不会被展开，而是作为 <code>...</code> 保持在 <code>call</code> 对象中。这种设置可以让你查看 <code>...</code> 参数的原始形式，作为一个 <code>...</code> 表达式存在于 <code>call</code> 对象中。</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs R">foo <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> y<span class="hljs-punctuation">,</span> ...<span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-built_in">call</span> <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-built_in">call</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br><br>foo<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> a <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> d <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>当调用 <code>foo(1, 2, a = 3, b = 4)</code> 时，<code>match.call(expand.dots = FALSE)</code> 会返回：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs R">foo<span class="hljs-punctuation">(</span>x <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> y <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> ... <span class="hljs-operator">=</span> pairlist<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> d <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>这个返回值表示 <code>...</code> 参数在调用中是如何被表达的，即作为一个整体存在。</p><h3 id="list"><a href="#list" class="headerlink" title="list"></a><code>list</code></h3><ul><li><p><strong>结构</strong>：<code>list</code> 是 R 中一个非常灵活的数据结构，可以包含不同类型的元素（如数字、字符、向量、数据框等）。它的元素可以是不同类型的对象，而且可以通过名称访问每个元素。</p></li><li><p><strong>用法</strong>：<code>list</code> 通常用于需要存储不同类型的数据或者复杂数据结构的情况。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">r</span><br>复制代码<br>my_list &lt;- <span class="hljs-built_in">list</span>(<span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-string">&quot;hello&quot;</span>, c = <span class="hljs-number">3</span>:<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure></li></ul><h3 id="pairlist"><a href="#pairlist" class="headerlink" title="pairlist"></a><code>pairlist</code></h3><ul><li><p><strong>结构</strong>：<code>pairlist</code> 是 R 的一个内部数据结构，主要用于存储函数的参数和其他类似的任务。它由一系列的“对”（pair）组成，每对包含一个名字和一个值。这些对连接成一个链表结构。</p></li><li><p><strong>特点</strong>：<code>pairlist</code> 是一个链表，它的每个元素都是一个包含名称和值的对。<code>pairlist</code> 通常用于处理函数调用中的参数，因为它能有效地处理参数的传递和名字。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-attribute">r</span>复制代码# pairlist example (conceptual)<br>pairlist_example &lt;- <span class="hljs-built_in">pairlist</span>(a = <span class="hljs-number">1</span>, b = <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> my_list <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> my_list<br><span class="hljs-operator">$</span>a<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-operator">$</span>b<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;hello&quot;</span><br><br><span class="hljs-operator">$</span><span class="hljs-built_in">c</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br><br><span class="hljs-operator">&gt;</span> <span class="hljs-comment"># pairlist example (conceptual)</span><br><span class="hljs-operator">&gt;</span> pairlist_example <span class="hljs-operator">&lt;-</span> pairlist<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> <br><span class="hljs-operator">&gt;</span> pairlist_example<br><span class="hljs-operator">$</span>a<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-operator">$</span>b<br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>这样看着都一样。</p><p>Pairlist objects are similar to Lisp’s dotted-pair lists. They are used extensively in the internals of R, but are rarely visible in interpreted code, although they are returned by formals, and can be created by (e.g.) the pairlist function.</p><p>Pairlists are handled in the R language in exactly the same way as generic vectors (“lists”). In particular, elements are accessed using the same [[]] syntax. The use of pairlists is deprecated since generic vectors are usually more efficient to use. When an internal pairlist is accessed from R it is generally (including when subsetted) converted to a generic vector.</p><p>也就是说pairlist和list在R中的处理方式完全相同，虽然在R的内部被广泛使用，但是这不意味着它在性能上表现更好。stack overflow上说如果不是考虑C语言的话，不需要考虑这个问题。</p><blockquote><ol><li><ul><li></li></ul></li></ol></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs R">test <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>...<span class="hljs-punctuation">)</span><span class="hljs-punctuation">&#123;</span><br>  num <span class="hljs-operator">&lt;-</span> ...length<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><br>  expandF <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">F</span><span class="hljs-punctuation">)</span><br>  expandF. <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">F</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>  expandF2 <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span>expandF.<span class="hljs-punctuation">)</span><br>  expandT <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><br>  expandT. <span class="hljs-operator">&lt;-</span> match.call<span class="hljs-punctuation">(</span>expand.dots <span class="hljs-operator">=</span> <span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>...<br>  print<span class="hljs-punctuation">(</span>num<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;expand.dots = F&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span> <br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;(expand.dots = F)$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF.<span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;as.character,expand.dots = F$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandF2<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;expand.dots = T&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandT<span class="hljs-punctuation">)</span><br>  cat<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;\n&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span><span class="hljs-string">&quot;(expand.dots = T)$...&quot;</span><span class="hljs-punctuation">)</span><br>  print<span class="hljs-punctuation">(</span>expandT.<span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">&#125;</span><br>test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p>输出</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">6</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;expand.dots = F&quot;</span><br>test<span class="hljs-punctuation">(</span>... <span class="hljs-operator">=</span> pairlist<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;(expand.dots = F)$...&quot;</span><br><span class="hljs-punctuation">[[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">1</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">2</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">3</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">3</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">4</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">5</span><br><br><span class="hljs-punctuation">[[</span><span class="hljs-number">6</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-number">6</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;as.character,expand.dots = F$...&quot;</span><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;1&quot;</span> <span class="hljs-string">&quot;2&quot;</span> <span class="hljs-string">&quot;3&quot;</span> <span class="hljs-string">&quot;4&quot;</span> <span class="hljs-string">&quot;5&quot;</span> <span class="hljs-string">&quot;6&quot;</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;expand.dots = T&quot;</span><br>test<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-string">&quot;(expand.dots = T)$...&quot;</span><br><span class="hljs-literal">NULL</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>设置RStudio语言默认为英文</title>
    <link href="/2024/08/25/20240825%E8%AE%BE%E7%BD%AERStudio%E6%8F%90%E7%A4%BA%E8%AF%8D%E4%B8%BA%E8%8B%B1%E6%96%87/"/>
    <url>/2024/08/25/20240825%E8%AE%BE%E7%BD%AERStudio%E6%8F%90%E7%A4%BA%E8%AF%8D%E4%B8%BA%E8%8B%B1%E6%96%87/</url>
    
    <content type="html"><![CDATA[<ul><li>修改RConsole文件</li><li>找到“R\R-4.4.1\etc\RConsole”文件，修改RConsole这个文件lang 选项为<strong>languange &#x3D; en</strong></li><li><img src="https://i-blog.csdnimg.cn/direct/8568eeb120fa42498ac687bcf930810a.png" alt="img"></li><li>修改后，重新启动RStudio</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>更新Github Personal Access Token</title>
    <link href="/2024/08/25/20240825%E5%9C%A8R%E4%B8%AD%E4%BD%BF%E7%94%A8GitHub%20Personal%20Access%20Token/"/>
    <url>/2024/08/25/20240825%E5%9C%A8R%E4%B8%AD%E4%BD%BF%E7%94%A8GitHub%20Personal%20Access%20Token/</url>
    
    <content type="html"><![CDATA[<p>用R下载github上的R包失败了，是我的令牌过期了。</p><p>报错如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> remotes<span class="hljs-operator">::</span>install_github<span class="hljs-punctuation">(</span><span class="hljs-string">&#x27;chris-mcginnis-ucsf/DoubletFinder&#x27;</span><span class="hljs-punctuation">)</span><br>Using github PAT from envvar GITHUB_PAT. Use `gitcreds::gitcreds_set()` and unset GITHUB_PAT <span class="hljs-keyword">in</span> .Renviron <span class="hljs-punctuation">(</span>or elsewhere<span class="hljs-punctuation">)</span> <span class="hljs-keyword">if</span> you want to use the more secure git credential store instead.<br>Error<span class="hljs-operator">:</span> Failed to install <span class="hljs-string">&#x27;unknown package&#x27;</span> from GitHub<span class="hljs-operator">:</span><br>  HTTP error <span class="hljs-number">401.</span><br>  Bad credentials<br><br>  Rate limit remaining<span class="hljs-operator">:</span> <span class="hljs-number">51</span><span class="hljs-operator">/</span><span class="hljs-number">60</span><br>  Rate limit reset at<span class="hljs-operator">:</span> <span class="hljs-number">2024</span><span class="hljs-operator">-</span><span class="hljs-number">08</span><span class="hljs-operator">-</span><span class="hljs-number">25</span> <span class="hljs-number">14</span><span class="hljs-operator">:</span><span class="hljs-number">46</span><span class="hljs-operator">:</span><span class="hljs-number">14</span> UTC<br></code></pre></td></tr></table></figure><p>然后去github，Developer Settings, Personal access tokens, Tokens (classic)。发现我的tooken已经过期了。重新生成令牌，选择repo权限。</p><p>一开始去R包etc下新建.Renviron，但也没用，这里应该是没有把R加入环境变量。</p><p>然后我按照报错信息里的，用Sys.getenv(“GITHUB_PAT”)看了下，还是老的令牌，然后用Sys.setenv()，根据提示，选择GITHUB_PAT，Sys.setenv(“GITHUB_PAT” &#x3D; “my_token”)，就可以了，不放心又用Sys.getenv看了下，确实改好了。</p><p>再去github下载就没问题了。然后运行结果的开头如下，后面就是正常的安装了</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs R">remotes<span class="hljs-operator">::</span>install_github<span class="hljs-punctuation">(</span><span class="hljs-string">&#x27;chris-mcginnis-ucsf/DoubletFinder&#x27;</span><span class="hljs-punctuation">)</span><br>Using github PAT from envvar GITHUB_PAT. Use `gitcreds::gitcreds_set()` and unset GITHUB_PAT <span class="hljs-keyword">in</span> .Renviron <span class="hljs-punctuation">(</span>or elsewhere<span class="hljs-punctuation">)</span> <span class="hljs-keyword">if</span> you want to use the more secure git credential store instead.<br>Downloading GitHub repo chris<span class="hljs-operator">-</span>mcginnis<span class="hljs-operator">-</span>ucsf<span class="hljs-operator">/</span>DoubletFinder<span class="hljs-operator">@</span>HEAD<br>These packages have more recent versions available.<br>It is recommended to update <span class="hljs-built_in">all</span> of them.<br>Which would you like to update<span class="hljs-operator">?</span><br><br><span class="hljs-number">1</span><span class="hljs-operator">:</span> All                           <br><span class="hljs-number">2</span><span class="hljs-operator">:</span> CRAN packages only            <br><span class="hljs-number">3</span><span class="hljs-operator">:</span> None                          <br><span class="hljs-number">4</span><span class="hljs-operator">:</span> bitops <span class="hljs-punctuation">(</span><span class="hljs-number">1.0</span><span class="hljs-operator">-</span><span class="hljs-number">7</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-number">1.0</span><span class="hljs-operator">-</span><span class="hljs-number">8</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">[</span>CRAN<span class="hljs-punctuation">]</span><br><br>Enter one or more numbers<span class="hljs-punctuation">,</span> or an empty line to skip updates<span class="hljs-operator">:</span> <br></code></pre></td></tr></table></figure><p>所以前面的提示并不是问题所在，设置好系统环境里的GITHUB令牌才是关键。</p>]]></content>
    
    
    
    <tags>
      
      <tag>R</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+Github 搭建网站</title>
    <link href="/2024/08/23/Hexo%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99/"/>
    <url>/2024/08/23/Hexo%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<p>依旧是遵循这篇知乎：<a href="[使用 Hexo+GitHub 搭建个人免费博客教程（小白向） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/60578464)" title="使用 Hexo+GitHub 搭建个人免费博客教程（小白向）">使用 Hexo+GitHub 搭建个人免费博客教程（小白向）</a>的流程，但是我要补充一些我遇到的问题和解决方案。</p><h2 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h2><h3 id="注册github账号"><a href="#注册github账号" class="headerlink" title="注册github账号"></a>注册github账号</h3><h3 id="下载nodejs。https-nodejs-org-zh-cn"><a href="#下载nodejs。https-nodejs-org-zh-cn" class="headerlink" title="下载nodejs。https://nodejs.org/zh-cn"></a>下载nodejs。<a href="https://nodejs.org/zh-cn">https://nodejs.org/zh-cn</a></h3><ul><li>我是windows系统，在官网下载安装包</li><li>我没有装在C盘，装在E:&#x2F;Web文件夹下了，所以要改环境变量，加入nodejs，链接到根目录npm</li><li>nodejs可能还是在C盘方便，但是我不知道为什么删不了Web文件夹下的nodejs</li></ul><h3 id="下载Git。https-git-scm-com-downloads"><a href="#下载Git。https-git-scm-com-downloads" class="headerlink" title="下载Git。https://git-scm.com/downloads"></a>下载Git。<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></h3><ul><li>我装在C盘了</li><li>在终端输入<code>node -v</code>, <code>npm -v</code>, <code>git --version</code>，检查安装是否成功以及环境变量是否配置好</li></ul><h2 id="二、Github"><a href="#二、Github" class="headerlink" title="二、Github"></a>二、Github</h2><h3 id="设置用户名和邮箱"><a href="#设置用户名和邮箱" class="headerlink" title="设置用户名和邮箱"></a>设置用户名和邮箱</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global user.name &quot;GitHub 用户名&quot;<br>git config --global user.email &quot;GitHub 邮箱&quot;<br></code></pre></td></tr></table></figure><h3 id="创建SSH密匙"><a href="#创建SSH密匙" class="headerlink" title="创建SSH密匙"></a>创建SSH密匙</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -t rsa -C &quot;GitHub 邮箱&quot;<br></code></pre></td></tr></table></figure><ul><li><p>进入 [C:\Users\用户名.ssh] 目录（要勾选显示“隐藏的项目”），用记事本打开公钥 id_rsa.pub 文件并复制里面的内容</p></li><li><p>登陆 GitHub ，进入 Settings 页面，选择左边栏的 SSH and GPG keys，点击 New SSH key</p></li><li><p>Title 随便取个名字，粘贴复制的 id_rsa.pub 内容到 Key 中，点击 Add SSH key 完成添加</p></li><li><p>在Git Bash 中输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh -T git@github.com<br></code></pre></td></tr></table></figure><p>显示successfully authenticated 即成功</p></li></ul><h3 id="创建Github-Pages-仓库"><a href="#创建Github-Pages-仓库" class="headerlink" title="创建Github Pages 仓库"></a>创建Github Pages 仓库</h3><ul><li>GitHub 主页右上角加号 -&gt; New repository：</li><li>Repository name 中输入 <code>用户名.github.io</code></li><li>勾选 “Initialize this repository with a README”</li><li>Description 选填</li><li>填好后点击 Create repository 创建。</li></ul><h2 id="三、本地安装-Hexo-博客程序"><a href="#三、本地安装-Hexo-博客程序" class="headerlink" title="三、本地安装 Hexo 博客程序"></a>三、本地安装 Hexo 博客程序</h2><blockquote><p><strong>npm的使用：</strong></p><p>npm下载非常慢，而且没有任何进度显示。</p><p>我首先手动设置npm镜像源为淘宝镜像源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm config set registry https://registry.npm.taobao.org/<br></code></pre></td></tr></table></figure><p>但是出现了 <strong>npm ERR! code CERT_HAS_EXPIRED</strong>，即证书过期的问题。</p><p>然后清楚npm缓存</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm cache clean --force<br></code></pre></td></tr></table></figure><p>禁用SSL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm config set strict-ssl false<br></code></pre></td></tr></table></figure><p>同时解决了这两个问题，具体细节不清楚hh，我认为真正起作用的是禁用了SSL验证</p></blockquote><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g hexo-cli<br></code></pre></td></tr></table></figure><h3 id="Hexo-初始化"><a href="#Hexo-初始化" class="headerlink" title="Hexo 初始化"></a>Hexo 初始化</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo init     # 初始化<br>npm install   # 安装组件<br>hexo g        # 生成页面 <br>hexo s        # 启动预览<br></code></pre></td></tr></table></figure><blockquote><p><strong>Hexo 博客文件夹目录结构</strong></p><p>_config.yml  # 网站的配置信息<br>package.json # 应用程序的信息<br>scaffolds    # 模版文件夹<br>source     # 存放用户资源，Markdown文档<br>themes     # 主题文件夹<br>public       # 网站文件</p></blockquote><h2 id="四、Hexo-Themes"><a href="#四、Hexo-Themes" class="headerlink" title="四、Hexo Themes"></a>四、Hexo Themes</h2><p>手动的话，从github仓库下载后，解压，更改文件夹名，放到themes文件夹下，在_config.yml 里更改theme后为文件夹名。</p><p>在<code>hexo s</code>时，虽然不报错，但是localhost时显示 <strong>No Layout:index.html</strong>，是因为themes目录下的主题文件夹的名称和_config.yml中不一致。</p><p>更改好文件夹名后，hexo s时成功显示theme图案，说明路径正确（不显示theme图案的就要注意了，多半有问题）。但还是不能正确加载，<strong>npm 报错 Error: Cannot find module ‘semver’</strong>，说明没下载模块<code>semver</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install semver<br></code></pre></td></tr></table></figure><p>再hexo s</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo s</span><br>INFO  Validating config<br>INFO  =======================================<br> ██╗ ██████╗ █████╗ ██████╗ ██╗   ██╗███████╗<br> ██║██╔════╝██╔══██╗██╔══██╗██║   ██║██╔════╝<br> ██║██║     ███████║██████╔╝██║   ██║███████╗<br> ██║██║     ██╔══██║██╔══██╗██║   ██║╚════██║<br> ██║╚██████╗██║  ██║██║  ██║╚██████╔╝███████║<br> ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚══════╝<br>=============================================<br>INFO  === Checking package dependencies ===<br>ERROR Package bulma-stylus is not installed.<br>ERROR Package hexo-component-inferno is not installed.<br>ERROR Package hexo-renderer-inferno is not installed.<br>ERROR Package inferno is not installed.<br>ERROR Package inferno-create-element is not installed.<br>ERROR Please install the missing dependencies your Hexo site root directory:<br>ERROR npm install --save bulma-stylus@0.8.0 hexo-component-inferno@^3.1.0 hexo-renderer-inferno@^1.0.2 inferno@^8.2.3 inferno-create-element@^8.2.3<br>ERROR or:<br>ERROR yarn add bulma-stylus@0.8.0 hexo-component-inferno@^3.1.0 hexo-renderer-inferno@^1.0.2 inferno@^8.2.3 inferno-create-element@^8.2.3<br></code></pre></td></tr></table></figure><p>根据报错指引下载缺少的包，下载后，hexo g，hexo s，就一切正常了。</p><p>最后</p><h2 id="五、部署-Hexo-到-GitHub-Pages"><a href="#五、部署-Hexo-到-GitHub-Pages" class="headerlink" title="五、部署 Hexo 到 GitHub Pages"></a>五、部署 Hexo 到 GitHub Pages</h2><p>本地博客测试成功后，就是上传到 GitHub 进行部署，使其能够在网络上访问。</p><p>首先<strong>安装 hexo-deployer-git</strong>：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>然后<strong>修改 _config.yml</strong> 文件末尾的 Deployment 部分，修改成如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">deploy:<br>  type: git<br>  repository: git@github.com:用户名/用户名.github.io.git<br>  branch: main<br></code></pre></td></tr></table></figure><p>完成后运行 <code>hexo d</code> 将网站上传部署到 GitHub Pages。</p><p>完成！这时访问我们的 GitHub 域名 <code>https://用户名.github.io</code> 就可以看到 Hexo 网站了。</p><p><strong>! 注意：</strong></p><p><strong>2020年10月1日后，Github会将所有新建的仓库的默认分支从master修改为main.所以最后面的config.yml是写main，不是master</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>npm</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有感</title>
    <link href="/2022/11/08/%E6%9C%89%E6%84%9F/"/>
    <url>/2022/11/08/%E6%9C%89%E6%84%9F/</url>
    
    <content type="html"><![CDATA[<p><em>行于所当行，止于所当止</em>。如果必须要做什么，就让自己喜欢上它。</p><p>至于理想、信念，只要自己是有理想的，自己的信念是正确的，那就足够了。走在正确的路上，不用时时害怕走错。别让理想变成包袱。</p>]]></content>
    
    
    
    <tags>
      
      <tag>日常</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>立冬</title>
    <link href="/2022/11/07/%E4%BA%8C%E5%8D%81%E5%B2%81%E5%89%8D%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%86%AC%E8%87%B3%E5%A4%9C/"/>
    <url>/2022/11/07/%E4%BA%8C%E5%8D%81%E5%B2%81%E5%89%8D%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%86%AC%E8%87%B3%E5%A4%9C/</url>
    
    <content type="html"><![CDATA[<p>忽然得知今天冬至。然而本人身在广州，并不感到冷，所以稀里糊涂地就立冬了。<em>独在异乡为异客，每逢佳节倍思亲。</em>今天倒也不是什么佳节，但是吃晚饭的时候还是想念奶奶包的土豆水饺了。山东就没什么地方包土豆水饺，更别说南方了。我在广州吃到过包玉米粒的蒸饺，感觉自己的常识都被重置了……据说土豆肉馅是从东北传来的，等我的东北师兄回宿舍的时候问问他。（2022年12月31日补：为什么会在立冬想要吃水饺呢，因为当时误以为那一天是冬至了，晚饭时还因此感慨了好久）</p>]]></content>
    
    
    
    <tags>
      
      <tag>日常</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的第一篇博客——建站历程</title>
    <link href="/2022/11/07/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
    <url>/2022/11/07/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h3 id="本网站由Hexo构建，主题是Ayer。"><a href="#本网站由Hexo构建，主题是Ayer。" class="headerlink" title="本网站由Hexo构建，主题是Ayer。"></a>本网站由Hexo构建，主题是Ayer。</h3><p>需要用到的工具有：</p><ul><li>Hexo</li><li>Chocolatey</li><li>Git-Bash</li><li>Powershell（选用）</li><li>VsCode</li></ul><hr><p>刚开始决定搭建网站，是从统计之都上看到了一个学长的个人网站，里面有他自己的博客和笔记。他的网站搭载Hugo动力系统，也是在Github上发布。可是他的操作系统是高贵的Mac，我是Windows。我在他的那篇搭建网站教学的blog卡了两天半，终于决定换个别人的教程，但依然使用Hugo。</p><p>使用Hugo搭建网站需要在Github上创建两个仓库，一个是真仓库，一个是网页发布用的，public文件夹下的东西就在后者。首先要搞清楚URL，然后每一次都要git status，git add .，git commit, git push -m origin main，等等。还经常出现无法连接到github，无法push等等问题。总之十分麻烦。我曾成功用Hugo做过一次。但想再更新时就出了问题。</p><p>就在这时，Hexo出现了。对我来说，真是“柳暗花明又一村”啊。我的舍友城哥给我一个用Hexo做动力的教程。Hexo真是太方便啦。</p><p>想要查看效果就用</p><blockquote><p>hexo s</p></blockquote><p>想要更新网站就用</p><blockquote><p>hexo g</p><p>hexo d</p></blockquote><p>再等一分钟发布到github，就ok了。</p><p>Hugo就是👎。对于我来说，网站体量很小，Hugo所宣传的网站搭建速度快我完全不感兴趣，Hexo已经足够了。Hugo上传这么麻烦，问题好多。Hexo才是真正的新手友好。我爱Hexo。</p><p>知乎Hexo教程：😼</p><p><a href="https://zhuanlan.zhihu.com/p/60578464">https://zhuanlan.zhihu.com/p/60578464</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>日常</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
